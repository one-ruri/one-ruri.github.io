<!DOCTYPE html>
<html lang="zh-CN"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="description" content="搜索算法 - http://localhost:1313/%E6%90%9C%E7%B4%A2%E7%AE%97%E6%B3%95/">
    <meta name="author" content="Jack - http://localhost:1313/">
    
    <meta name="msvalidate.01" content="B46311949B856F2A7015F366FB3CE878" />
    <title>搜索算法</title>
    <link rel="icon" type="image/png" href="/favicon.ico">
    
    <link rel="stylesheet" href="http://localhost:1313/style.min.d252ad53a5e6b2ae6b8c6c1661107189be3668e36c8dd61697bbe008595a7e04.css">
    
    <script type="text/javascript" src="/main.js" defer></script>
    
</head>
<body class="active-animate ">
        <div id="header"><div class="container-header">
    <div id="vars" class="container-vars" style="display: none;">
	{
		"isSingleColumnOfPostList": true,
		"hasFoldAllCodeBlocks": false,
		"svgColor": "",
		"en": false,
		"dark": false
	}
</div>
    <h1 class="title">
        
            搜索算法
            
        
    </h1>

    <div class="container-breadcrumb-nav">
    
    <div class="breadcrumb-nav-bar">
        <div><a href="/"><svg t="1656411084410" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2954" width="16" height="16"><path d="M947.5 390.6l-377-290c-34.5-26.5-82.6-26.5-117.1 0l-377 290c-14 10.8-16.6 30.9-5.9 44.9 10.8 14 30.9 16.6 44.9 5.9l28.5-21.9V768c0 88.2 71.8 160 160 160h80c35.3 0 64-28.7 64-64V640c0-17.6 14.4-32 32-32h64c17.6 0 32 14.4 32 32v224c0 35.3 28.7 64 64 64h80c88.2 0 160-71.8 160-160V419.4l28.5 21.9c5.8 4.5 12.7 6.6 19.5 6.6 9.6 0 19.1-4.3 25.4-12.5 10.8-13.9 8.2-34-5.8-44.8zM816 768c0 52.9-43.1 96-96 96h-80V640c0-52.9-43.1-96-96-96h-64c-52.9 0-96 43.1-96 96v224h-80c-52.9 0-96-43.1-96-96V370.2l284.5-218.8c11.5-8.8 27.5-8.8 39 0L816 370.2V768z" fill="#6c757d" p-id="2955"></path></svg></a></div>
        <div><a href="/nav"><svg t="1656411531924" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5827" width="16" height="16"><path d="M849.59197473 125.23018519L139.22930586 391.72854662a23.35052669 23.35052669 0 0 0-14.95414244 21.65490745c-0.12257519 9.70384955 5.61801843 18.46795771 14.40255493 22.04306141l318.42928099 129.25528056 119.51057092 320.39047893c3.06437293 8.23295069 10.35758221 13.89182751 18.7335381 14.87242563l2.7170774 0.14300521a22.79893918 22.79893918 0 0 0 21.20546682-15.36272638l259.51158924-729.54564933a23.8612558 23.8612558 0 0 0-5.31158128-24.55584682 22.3290685 22.3290685 0 0 0-23.9021142-5.43415649zM793.65694081 211.64552314l-196.63064161 552.75171747-91.91077952-246.37564122-253.62799211-102.96295445 542.16941324-203.4131218z" p-id="5828" fill="#6c757d"></path></svg></a></div>
        <div><a href="/search"><svg t="1656411627509" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1730" width="14" height="14"><path d="M469.333333 85.333333c211.968 0 384 172.032 384 384s-172.032 384-384 384-384-172.032-384-384 172.032-384 384-384z m0 682.666667c164.992 0 298.666667-133.674667 298.666667-298.666667 0-165.034667-133.674667-298.666667-298.666667-298.666666-165.034667 0-298.666667 133.632-298.666666 298.666666 0 164.992 133.632 298.666667 298.666666 298.666667z m362.026667 3.029333l120.704 120.661334-60.373333 60.373333-120.661334-120.704 60.330667-60.330667z" p-id="1731" fill="#6c757d"></path></svg></a></div>
        <div><a href="/posts"><svg t="1656411724198" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5655" width="12" height="12"><path d="M811.705761 1024H212.294239c-93.1199 0-174.823046-87.570975-174.823046-187.387854V162.322018C37.471193 69.776145 112.604921 0 212.294239 0H596.190595l7.015883 5.93161c111.74388 95.479788 185.857116 170.741078 279.614824 266.093304 29.65805 30.040735 61.165743 62.122454 96.436499 97.393211l7.271006 7.334787v459.859234c-0.063781 99.816879-81.703145 187.387854-174.823046 187.387854zM212.294239 49.94033c-72.391155 0-124.882716 47.261538-124.882716 112.381688v674.290128c0 71.94469 59.507443 137.383743 124.882716 137.383743h599.411522c65.311492 0 124.882716-65.439053 124.882716-137.383743V397.417876c-32.528184-32.464404-61.73977-62.250016-89.356836-90.377328-90.951355-92.418312-163.278729-165.957521-269.601245-257.163999H212.294239z" fill="#6c757d" p-id="5656"></path><path d="M936.588477 449.526752h-212.326129c-99.753099 0-187.324073-81.703145-187.324073-174.823046V49.94033a25.002055 25.002055 0 0 1 49.94033 0v224.763376c0 65.311492 65.502834 124.882716 137.383743 124.882716h212.326129a25.002055 25.002055 0 1 1 0 49.94033z" fill="#6c757d" p-id="5657"></path></svg></a></div>
        <div><a href="/archive"><svg t="1656411795742" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7334" width="12" height="12"><path d="M884.224 522.24H504.32V141.824c0-16.896-13.824-30.72-30.72-30.72-120.32 0-233.472 47.616-317.952 134.144S26.112 445.952 29.184 566.784c2.56 114.688 49.152 222.72 131.072 304.128 81.92 81.408 189.952 128 304.64 130.56h10.24c117.76 0 227.84-45.568 312.32-128.512 86.528-85.504 133.632-199.68 132.608-321.024-0.512-2.048-1.536-29.696-35.84-29.696z m-140.288 307.712c-74.752 73.728-173.056 112.64-277.504 110.592-205.824-4.608-370.688-169.472-375.296-374.784-3.072-104.448 35.84-202.752 108.544-277.504 65.536-67.072 151.552-107.52 243.712-114.688v378.88c0 16.896 13.824 30.72 30.72 30.72 129.024 0 311.296 0 382.976 0.512-6.144 93.184-46.08 179.712-113.152 246.272z" fill="#6c757d" p-id="7335"></path><path d="M603.136 11.264c-8.192-0.512-15.872 3.072-22.016 8.704-5.632 5.632-9.216 13.824-9.216 22.016v378.88c0 16.896 13.824 30.72 30.72 30.72h378.88c16.896 0 30.72-13.824 30.72-30.72 0-223.744-183.808-407.552-409.088-409.6z m30.208 378.88V74.24c167.424 16.384 301.056 150.016 315.904 315.904h-315.904z" fill="#6c757d" p-id="7336"></path></svg></a></div>
        <div id="light-dark" style="cursor: pointer;"><a><svg t="1656411842215" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5086" width="12" height="12"><path d="M1007.492874 384.513055c-8.795694-34.58307-21.189627-67.666874-36.682043-99.05151-2.698679-5.397358-10.894667-3.498287-10.894666 2.598728v0.299853c0 32.484098-6.896624 63.868734-19.890263 92.554691-10.694764 23.488501-25.487523 45.077933-43.978471 64.068635-41.779547 42.679107-99.05151 66.967217-158.722299 67.26707-61.869712 0.299853-119.941284-24.188159-162.920244-68.966238-40.280281-41.979449-62.56937-98.251902-62.269516-156.323473 0.399804-59.270984 23.588452-114.94373 65.567901-156.823229 19.59041-19.59041 42.179351-35.082826 66.667364-46.077443C672.956643 71.166451 704.041426 64.469729 736.125719 64.469729h1.299364c6.097015 0 8.096037-8.096037 2.598728-10.794715C708.739126 37.982696 675.655322 25.488812 641.172203 16.493216 599.492607 5.598549 555.714038-0.098662 510.536154 0.001289 222.37722 0.700947-7.41029 237.38508 0.185992 525.444064c7.096526 271.667008 225.889418 490.559851 497.456474 497.856279 287.559228 7.796183 524.14341-220.891864 525.842579-508.551044 0.299853-44.977981-5.297407-88.656599-15.992171-130.236244z m-83.15929 301.552378c-22.588942 53.27392-54.873137 101.250434-95.953027 142.330323-41.179841 41.179841-89.056403 73.464036-142.330324 95.953027-55.172991 23.288599-113.744317 35.182777-174.314666 35.182777s-119.141675-11.794226-174.314666-35.182777c-53.27392-22.588942-101.250434-54.873137-142.330323-95.953027-41.179841-41.179841-73.464036-89.056403-95.953027-142.330323C75.749001 630.892442 63.954774 572.221164 63.954774 511.750767s11.794226-119.141675 35.182777-174.314666c22.588942-53.27392 54.873137-101.250434 95.953027-142.330323 41.179841-41.179841 89.056403-73.464036 142.330323-95.953027C392.593892 75.7642 451.26517 63.969974 511.735567 63.969974c13.99315 0 27.886348 0.599706 41.679596 1.89907C489.246577 118.643209 448.266638 198.704016 448.266638 288.360126c0 159.022152 128.836929 287.859081 287.859081 287.859081 89.156354 0 168.817357-40.580134 221.691473-104.149015 1.099462 13.09359 1.699168 26.387082 1.699168 39.680575 0 60.470397-11.794226 119.141675-35.182776 174.314666z" p-id="5087" fill="#6c757d"></path></svg></a></div>
        
    </div>

    
</div>

            <div id="toc">📜</div>
        
    
    
</div>
</div>
        <div id="content">















<div class="container-main 
     container-page 
">

    <div class="desc">
        
        <span>
            
            <svg t="1656736000388" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7409" width="12" height="12"><path d="M524.885333 338.986667L200.362667 663.466667c-17.28 15.274667-27.989333 36.693333-29.696 56.234666v133.76l130.730666 0.085334c22.784-1.621333 43.989333-12.245333 61.013334-31.701334l322.688-322.645333-160.213334-160.213333z m60.373334-60.330667l160.170666 160.213333 102.144-102.144a19.712 19.712 0 0 0 0-27.861333L715.093333 176.426667a19.456 19.456 0 0 0-27.605333 0L585.258667 278.613333zM701.312 85.333333c27.946667 0 54.741333 11.136 74.282667 30.848l132.309333 132.309334a105.045333 105.045333 0 0 1 0 148.565333L424.874667 879.957333c-29.824 34.346667-72.106667 55.466667-120.448 58.794667H85.333333v-42.666667l0.128-179.84c3.626667-44.970667 24.576-86.826667 56.448-114.944l485.12-485.034666A104.789333 104.789333 0 0 1 701.269333 85.333333z" p-id="7410" fill="#adb5bd"></path></svg>
            2024-03-10&nbsp;
        </span>
        <span>
            
            <svg t="1656737270708" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="23838" width="11" height="11"><path d="M824.264 95.36c0-23.859 25.043-44.16 48.902-44.16s49.714 20.301 49.714 44.16v190.08c0 23.859-19.054 52.868-42.913 52.868h-190.08c-23.859 0-46.696-25.96-46.696-49.819s22.55-46.249 46.409-46.249h82.025C702.344 175.534 610.22 155.853 512 155.853c-206.775 0-360.398 149.372-360.398 356.147 0 206.775 153.623 358.23 360.398 358.23 206.775 0 357.467-151.455 357.467-358.23 0-23.859 23.634-50.706 53.413-50.706 29.78 0 49.92 26.847 49.92 50.706 0 254.493-206.307 460.8-460.8 460.8-254.493 0-460.8-206.307-460.8-460.8C51.2 257.507 257.507 51.2 512 51.2c122.4 0 226.684 33.296 312.264 117.369 0.358 0.351 0.358-24.052 0-73.209z" p-id="23839" fill="#adb5bd"></path></svg>
            2024-03-10&nbsp;&nbsp;&nbsp;
        </span>
        <span>
            
            <svg t="1656737548689" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="33866" width="12" height="12"><path d="M832.038608 64.662657H192.030028C121.255125 64.662657 63.940169 121.98845 63.940169 192.694717v446.793671C63.940169 710.205493 121.255125 767.643272 192.030028 767.643272h133.353183a63.940169 63.940169 0 0 1 55.219742 31.576328l76.099638 129.83828c12.358154 21.093031 33.790754 31.626903 55.216129 31.626903s42.832688-10.544709 55.198067-31.619678l76.222461-129.870792a63.940169 63.940169 0 0 1 55.212517-31.551041h133.54103c70.576219 0 127.732228-57.289669 127.732227-127.800865V192.391272C959.825022 121.85479 902.643727 64.662657 832.038608 64.662657zM895.884854 639.842407A63.85347 63.85347 0 0 1 832.092795 703.703103h-133.54103a127.753903 127.753903 0 0 0-110.349172 63.09847l-76.222461 129.856342a0.274545 0.274545 0 0 1 0-0.050574h-0.032512s-0.021675 0.061411-0.032512 0.061412l-76.1466-129.85273A127.804477 127.804477 0 0 0 325.383211 703.703103H192.030028A64.207489 64.207489 0 0 1 127.880338 639.488388V192.694717A64.102729 64.102729 0 0 1 192.030028 128.602826h640.00858A63.799284 63.799284 0 0 1 895.884854 192.391272v447.451135z" fill="#adb5bd" p-id="33867"></path><path d="M608.154093 288.092004A31.970084 31.970084 0 0 0 576.184009 320.062089v160.078006l-134.650049-179.278119A31.970084 31.970084 0 0 0 384.002258 320.062089v255.760676a31.970084 31.970084 0 0 0 63.940169 0v-159.958796l134.650048 179.274507a31.970084 31.970084 0 0 0 57.531703-19.200113V320.062089a31.970084 31.970084 0 0 0-31.970085-31.970085z" fill="#adb5bd" p-id="33868"></path></svg>
            13321 字</span>&nbsp;
        <span>
            
            <svg t="1656737462334" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="32892" width="12" height="12"><path d="M512 74.666667C270.933333 74.666667 74.666667 270.933333 74.666667 512S270.933333 949.333333 512 949.333333 949.333333 753.066667 949.333333 512 753.066667 74.666667 512 74.666667z m0 810.666666c-204.8 0-373.333333-168.533333-373.333333-373.333333S307.2 138.666667 512 138.666667 885.333333 307.2 885.333333 512 716.8 885.333333 512 885.333333z" p-id="32893" fill="#adb5bd"></path><path d="M695.466667 567.466667l-151.466667-70.4V277.333333c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v238.933334c0 12.8 6.4 23.466667 19.2 29.866666l170.666667 81.066667c4.266667 2.133333 8.533333 2.133333 12.8 2.133333 12.8 0 23.466667-6.4 29.866666-19.2 6.4-14.933333 0-34.133333-17.066666-42.666666z" p-id="32894" fill="#adb5bd"></path></svg>
            27 分钟</span>
            <div class="container-ctgtag">
	<div class="taxonomy">
		
		<div class="ctg">
			
			
		</div>
		<div class="tag">
			
			 - 
			
			<a href="/tags/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%A4%87%E8%B5%9B">蓝桥杯备赛</a>
			
			<a href="/tags/%E6%90%9C%E7%B4%A2%E7%AE%97%E6%B3%95">搜索算法</a>
			
		</div>
	</div>
</div>
        
    </div>
    
    <div class="toc">
        
        <div class="page-operation">
            <div><a href="#"><img src="/imgs/icons/arrow-up-circle.svg" alt=""></a></div>
            <div><a href="http://localhost:1313/%E6%9E%9A%E4%B8%BE%E6%B3%95%E4%B8%8E%E5%B0%BA%E5%8F%96%E6%B3%95/"><img src="/imgs/icons/arrow-left-circle.svg" alt=""></a></div>
            <div><a href="http://localhost:1313/%E9%80%92%E6%8E%A8%E6%B3%95%E4%B8%8E%E9%80%92%E5%BD%92%E6%B3%95/"><img src="/imgs/icons/arrow-right-circle.svg" alt=""></a></div>
        </div>
        
        <nav id="TableOfContents">
  <ul>
    <li><a href="#深度优先搜索">深度优先搜索</a></li>
    <li><a href="#知识点">知识点</a></li>
    <li><a href="#深度优先搜索基本概念">深度优先搜索基本概念</a></li>
    <li><a href="#dfs-的设计步骤">DFS 的设计步骤</a></li>
    <li><a href="#dfs-题目讲解">DFS 题目讲解</a>
      <ul>
        <li><a href="#状态搜索代表-n-皇后问题">状态搜索代表： N 皇后问题</a></li>
        <li><a href="#图的路径搜索代表-路径之谜">图的路径搜索代表-路径之谜</a></li>
        <li><a href="#最大数字">最大数字</a></li>
      </ul>
    </li>
    <li><a href="#实验总结">实验总结</a></li>
    <li><a href="#广度优先搜索">广度优先搜索</a></li>
    <li><a href="#知识点-1">知识点</a></li>
    <li><a href="#广度优先搜索基本概念">广度优先搜索基本概念</a></li>
    <li><a href="#广度优先搜索算法的设计步骤">广度优先搜索算法的设计步骤</a>
      <ul>
        <li><a href="#长草">长草</a></li>
        <li><a href="#走迷宫">走迷宫</a></li>
        <li><a href="#迷宫">迷宫</a></li>
      </ul>
    </li>
    <li><a href="#实验总结-1">实验总结</a></li>
  </ul>
</nav>
    </div>

    <div class='content  content '>
        <h2 id="深度优先搜索">深度优先搜索</h2>
<p>Depth First Search 即 DFS，意为深度优先搜索，是所有的搜索手段之一。它是从某个状态开始，不断进行状态转移，直到不能转移后，向后回退，一直到遍历完所有的状态。</p>
<p>本章题目难度较大，请大家仔细研读讲解和代码。</p>
<h2 id="知识点">知识点</h2>
<p>1.DFS 算法设计原理与实现方法 2.经典题型精讲</p>
<h2 id="深度优先搜索基本概念">深度优先搜索基本概念</h2>
<p>作为搜索算法的一种，DFS 主要是用于解决 <code>NP</code> 完全问题。但是，深度优先搜索算法的时间复杂度较高，深度优先搜索是 $O(n!)$ 的阶乘级算法，它的效率非常低，在数据规模变大时，此算法就难以解决当前的问题了。</p>
<p>所以搜索算法使用于状态节点较小规模的问题。</p>
<h2 id="dfs-的设计步骤">DFS 的设计步骤</h2>
<p>按照定义设计：</p>
<ol>
<li>
<p>确定该题目的状态（包括边界）</p>
</li>
<li>
<p>找到状态转移方式</p>
</li>
<li>
<p>找到问题的出口，计数或者某个状态</p>
</li>
<li>
<p>设计搜索</p>
</li>
</ol>
<p>伪代码：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">check</span>(<span style="color:#a61717;background-color:#e3d2d2">参数</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span>(<span style="color:#a61717;background-color:#e3d2d2">满足条件</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">bool</span> <span style="color:#900;font-weight:bold">pd</span>(<span style="color:#a61717;background-color:#e3d2d2">参数</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#a61717;background-color:#e3d2d2">相应操作</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">dfs</span>(<span style="color:#458;font-weight:bold">int</span> step)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>        <span style="color:#a61717;background-color:#e3d2d2">判断边界</span>pd()
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#a61717;background-color:#e3d2d2">不在边界内，即回溯</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a61717;background-color:#e3d2d2">尝试每一种可能</span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>               <span style="color:#a61717;background-color:#e3d2d2">满足</span>check条件
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>               <span style="color:#a61717;background-color:#e3d2d2">标记</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>               <span style="color:#a61717;background-color:#e3d2d2">继续下一步</span>dfs(step<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>               <span style="color:#a61717;background-color:#e3d2d2">恢复初始状态（回溯的时候要用到）</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="dfs-题目讲解">DFS 题目讲解</h2>
<h3 id="状态搜索代表-n-皇后问题">状态搜索代表： N 皇后问题</h3>
<p><a href="https://www.lanqiao.cn/problems/1508/learning/">题目链接</a></p>
<p>难度: 简单</p>
<p>标签: DFS</p>
<p><strong>题目描述:</strong></p>
<p>在 $N\times N$ 的方格棋盘放置了 $N$ 个皇后，使得它们不相互攻击（即任意 $2$ 个皇后不允许处在同一排，同一列，也不允许处在与棋盘边框成 $45$ 角的斜线上。你的任务是，对于给定的 $N$，求出有多少种合法的放置方法。</p>
<p><strong>输入描述:</strong></p>
<p>输入中有一个正整数 $N≤10$，表示棋盘和皇后的数量</p>
<p><strong>输出描述:</strong></p>
<p>为一个正整数，表示对应输入行的皇后的不同放置数量。</p>
<p><strong>输入输出样例:</strong></p>
<p><strong>示例:</strong></p>
<p><strong>输入:</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>5
</span></span></code></pre></div><p><strong>输出:</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>10
</span></span></code></pre></div><p><strong>运行限制:</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>最大运行时间：1s 最大运行内存: 256M
</span></span></code></pre></div><p><strong>解题思路:</strong></p>
<p>下面是用递归的深度优先搜索求解 $n$ 皇后问题的算法描述：</p>
<p>这里用一个 $N \times N$ 的矩阵来表示棋盘，但是我们不需要定义这样的数组，只要心中有 $N \times N$ 的期盼即可。</p>
<ol>
<li>
<p><strong>算法开始：</strong></p>
<p>当前行设为第一行，当前列设为第一列，从第一行第一列开始搜索，即只能让皇后从第一行放到第 $n$ 行。</p>
<p>这样在每次判断是否满足情况时我们不用去判断是否皇后在相同行。</p>
<p>我们只用判断之前的 $1$ 到 $a-1$ 个皇后的位置和当前第 $a$ 个皇后的位置是否属于同一列或者斜线，判断是否同一列。</p>
</li>
<li>
<p><strong>判断边界：</strong></p>
<p>在当前行，当前列的位置上判断是否满足条件(即保证经过这一点的行,列与斜线上都没有两个皇后)，若不满足，跳到第 $5$ 步，即不符合边界条件。</p>
<p>首先说一下，什么叫不符合边界条件，不只是跳出了搜索范围，剪枝也可以从这里开始，比如这里不满足条件，向下继续搜索也不会再有结果。</p>
<p>这可以理解为超出边界的剪枝，我们的边界只得可能存在解的范围，这里已经超出有解的范围，必然要被踢出。</p>
<p>判断条件：</p>
<p>我们用数组 $x[a]=i$ 来表示第 $a$ 个皇后的位置在第 $a$ 行第 $i$ 列，我们不用考虑是否在同一行的问题你，我们只用判断之前的 $1$ 到 $a-1$ 个皇后的位置和当前第 $a$ 个皇后的位置是否属于同一列或者斜线。</p>
<p>判断是否属于同一列： 就判断 $x[a]$ 是否等于 $x[i]$; 判断是否属于同一斜线：等同于判断行之差是否等于列之差也，即 $abs(x[k]-x[i]) \neq abs(k-i)$。</p>
</li>
<li>
<p><strong>搜索过程：</strong></p>
<p>调用 <code>Check</code> 函数。</p>
<p>如果 边界条件，就继续调用放下一个皇后的位置</p>
</li>
<li>
<p><strong><code>Check</code> 函数:</strong></p>
<p>如果当搜索到第 $N+1$ 行的时候，即代表前 $N$ 行已经搜索完了，所以这个时候正好求出了一个解，记录加一。</p>
</li>
<li>
<p>在当前位置上不满足条件的情形，进行回溯。</p>
</li>
</ol>
<p>C++ 语言描述:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#include</span> <span style="color:#999;font-weight:bold;font-style:italic">&lt;iostream&gt;</span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#include</span> <span style="color:#999;font-weight:bold;font-style:italic">&lt;cstdio&gt;</span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic"></span><span style="color:#000;font-weight:bold">using</span> <span style="color:#000;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> x[<span style="color:#099">15</span>] <span style="color:#000;font-weight:bold">=</span> {<span style="color:#099">0</span>};
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> sum,n;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">PD</span>(<span style="color:#458;font-weight:bold">int</span> k)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span> i<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>; i<span style="color:#000;font-weight:bold">&lt;</span>k; i<span style="color:#000;font-weight:bold">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span>(abs(k<span style="color:#000;font-weight:bold">-</span>i)<span style="color:#000;font-weight:bold">==</span>abs(x[k]<span style="color:#000;font-weight:bold">-</span>x[i]))
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">if</span> (x[k]<span style="color:#000;font-weight:bold">==</span>x[i])
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//即判断是否符合条件来放,i表示皇后所在的行数，x[i]表示所在的列数，
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        <span style="color:#998;font-style:italic">//所以前面那个条件用来判断两个皇后是否在对角线上,后面用来判断是否在同一列上。
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        <span style="color:#998;font-style:italic">//行数不需要判断，因为他们本身的i就代表的是行数
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">bool</span> <span style="color:#900;font-weight:bold">check</span>(<span style="color:#458;font-weight:bold">int</span> a)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span>(a<span style="color:#000;font-weight:bold">&gt;</span>n)
</span></span><span style="display:flex;"><span>        sum<span style="color:#000;font-weight:bold">++</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">else</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">DFS</span>(<span style="color:#458;font-weight:bold">int</span> a)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span>(check(a))
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> ;
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">else</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span> i<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>; i<span style="color:#000;font-weight:bold">&lt;=</span>n; i<span style="color:#000;font-weight:bold">++</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            x[a]<span style="color:#000;font-weight:bold">=</span>i;
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic">//第a个皇后放的列数
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            <span style="color:#000;font-weight:bold">if</span>(PD(a))
</span></span><span style="display:flex;"><span>                    <span style="color:#998;font-style:italic">//判断是否能放这步
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>                DFS(a<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>);
</span></span><span style="display:flex;"><span>                    <span style="color:#998;font-style:italic">//能的话进行下一个皇后的放置
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            <span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">continue</span> ;
</span></span><span style="display:flex;"><span>                    <span style="color:#998;font-style:italic">//不能就下一列
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    cin<span style="color:#000;font-weight:bold">&gt;&gt;</span>n;
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//表示几个皇后
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    DFS(<span style="color:#099">1</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//每次都从第一个皇后开始
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    cout<span style="color:#000;font-weight:bold">&lt;&lt;</span>sum<span style="color:#000;font-weight:bold">&lt;&lt;</span>endl;
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Python 语言描述：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span> x <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">0</span>] <span style="color:#000;font-weight:bold">*</span> <span style="color:#099">15</span>
</span></span><span style="display:flex;"><span>n <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span><span style="color:#0086b3">sum</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">def</span> <span style="color:#900;font-weight:bold">pd</span>(k):
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(<span style="color:#099">1</span>, k):
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span> <span style="color:#0086b3">abs</span>(k <span style="color:#000;font-weight:bold">-</span> i) <span style="color:#000;font-weight:bold">==</span> <span style="color:#0086b3">abs</span>(x[k] <span style="color:#000;font-weight:bold">-</span> x[i]):
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">elif</span> x[k] <span style="color:#000;font-weight:bold">==</span> x[i]:
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic"># 即判断是否符合条件来放,i表示皇后所在的行数，x[i]表示所在的列数，</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic"># 所以前面那个条件用来判断两个皇后是否在对角线上,后面用来判断是否在同一列上。</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic"># 行数不需要判断，因为他们本身的i就代表的是行数</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">def</span> <span style="color:#900;font-weight:bold">check</span>(a):
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> a <span style="color:#000;font-weight:bold">&gt;</span> n:
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">global</span> <span style="color:#0086b3">sum</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0086b3">sum</span> <span style="color:#000;font-weight:bold">+=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">else</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">True</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">def</span> <span style="color:#900;font-weight:bold">DFS</span>(a):
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> check(a):
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">else</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(<span style="color:#099">1</span>, n <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>):
</span></span><span style="display:flex;"><span>            x[a] <span style="color:#000;font-weight:bold">=</span> i
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic"># 第a个皇后放的列数</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">if</span> pd(a):
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic"># 判断是否能放这步</span>
</span></span><span style="display:flex;"><span>                DFS(a <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>)
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic"># 能的话进行下一个皇后的放置</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">else</span>:
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">continue</span>
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic">#   不能就下一列</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">if</span> __name__ <span style="color:#000;font-weight:bold">==</span> <span style="color:#d14">&#39;__main__&#39;</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    n <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">int</span>(<span style="color:#0086b3">input</span>())
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># 不能就下一列</span>
</span></span><span style="display:flex;"><span>    DFS(<span style="color:#099">1</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># 每次都从第一个皇后开始</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0086b3">print</span>(<span style="color:#0086b3">sum</span>)
</span></span></code></pre></div><p>Java 语言描述:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#555">java.util.Scanner</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">import static</span><span style="color:#bbb"> </span><span style="color:#555">java.lang.Math.abs</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Main</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>x<span style="color:#000;font-weight:bold">[]</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#000;font-weight:bold">[</span>15<span style="color:#000;font-weight:bold">]</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>sum,<span style="color:#bbb"> </span>n;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">boolean</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">PD</span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>k)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">for</span><span style="color:#bbb"> </span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>i<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>1;<span style="color:#bbb"> </span>i<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#bbb"> </span>k;<span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">++</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>(abs(k<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">-</span><span style="color:#bbb"> </span>i)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">==</span><span style="color:#bbb"> </span>abs(x<span style="color:#000;font-weight:bold">[</span>k<span style="color:#000;font-weight:bold">]</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">-</span><span style="color:#bbb"> </span>x<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]</span>))<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>(x<span style="color:#000;font-weight:bold">[</span>k<span style="color:#000;font-weight:bold">]</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">==</span><span style="color:#bbb"> </span>x<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic">//即判断是否符合条件来放,i表示皇后所在的行数，x[i]表示所在的列数，</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic">//所以前面那个条件用来判断两个皇后是否在对角线上,后面用来判断是否在同一列上。</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic">//行数不需要判断，因为他们本身的i就代表的是行数</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">boolean</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">check</span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>a)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>(a<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>n)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>sum<span style="color:#000;font-weight:bold">++</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">else</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">DFS</span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>a)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>(check(a))<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">return</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">else</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">for</span><span style="color:#bbb"> </span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>i<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>1;<span style="color:#bbb"> </span>i<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&lt;=</span><span style="color:#bbb"> </span>n;<span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">++</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>x<span style="color:#000;font-weight:bold">[</span>a<span style="color:#000;font-weight:bold">]</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>i;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#998;font-style:italic">//第a个皇后放的列数</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>(PD(a))<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span><span style="color:#998;font-style:italic">//判断是否能放这步</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>DFS(a<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>1);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span><span style="color:#998;font-style:italic">//能的话进行下一个皇后的放置</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">continue</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#998;font-style:italic">//不能就下一列</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">main</span>(String<span style="color:#000;font-weight:bold">[]</span><span style="color:#bbb"> </span>args)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>Scanner<span style="color:#bbb"> </span>in<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Scanner(System.<span style="color:#008080">in</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>n<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>in.<span style="color:#008080">nextInt</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic">//表示几个皇后</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>DFS(1);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic">//每次都从第一个皇后开始</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(sum);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><h3 id="图的路径搜索代表-路径之谜">图的路径搜索代表-路径之谜</h3>
<p><a href="https://www.lanqiao.cn/problems/89/learning/">题目链接</a></p>
<p>难度: 中等</p>
<p>标签: DFS, 2016, 国赛</p>
<p><strong>题目描述:</strong></p>
<p>小明冒充 $X$ 星球的骑士，进入了一个奇怪的城堡。</p>
<p>城堡里边什么都没有，只有方形石头铺成的地面。</p>
<p>假设城堡地面是 $n \times n$ 个方格。如下图所示。</p>
<p><img src="./../images/%E6%90%9C%E7%B4%A2%E7%AE%97%E6%B3%95/uid1580206-20210202-1612248935564.png" alt="地图"></p>
<p>按习俗，骑士要从西北角走到东南角。可以横向或纵向移动，但不能斜着走，也不能跳跃。每走到一个新方格，就要向正北方和正西方各射一箭。（城堡的西墙和北墙内各有 $n$ 个靶子）同一个方格只允许经过一次。但不必走完所有的方格。如果只给出靶子上箭的数目，你能推断出骑士的行走路线吗？有时是可以的，比如上图中的例子。</p>
<p>本题的要求就是已知箭靶数字，求骑士的行走路径（测试数据保证路径唯一）</p>
<p><strong>输入:</strong></p>
<p>第一行一个整数 $N$ ($0  \leq  N  \leq  20$)，表示地面有 $N \times N$ 个方格。</p>
<p>第二行 $N$ 个整数，空格分开，表示北边的箭靶上的数字（自西向东）</p>
<p>第三行 $N$ 个整数，空格分开，表示西边的箭靶上的数字（自北向南）</p>
<p><strong>输出：</strong></p>
<p>输出一行若干个整数，表示骑士路径。</p>
<p>为了方便表示，我们约定每个小格子用一个数字代表，从西北角开始编号: 0,1,2,3 $\cdots$</p>
<p><strong>输入输出样例：</strong></p>
<p>输入</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>4
</span></span><span style="display:flex;"><span>2 4 3 4
</span></span><span style="display:flex;"><span>4 3 3 3
</span></span></code></pre></div><p>比如，上图中的方块编号为：</p>
<table>
  <thead>
      <tr>
          <th>箭靶</th>
          <th>2</th>
          <th>4</th>
          <th>3</th>
          <th>4</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>4</td>
          <td>0</td>
          <td>1</td>
          <td>2</td>
          <td>3</td>
      </tr>
      <tr>
          <td>3</td>
          <td>4</td>
          <td>5</td>
          <td>6</td>
          <td>7</td>
      </tr>
      <tr>
          <td>3</td>
          <td>8</td>
          <td>9</td>
          <td>10</td>
          <td>11</td>
      </tr>
      <tr>
          <td>3</td>
          <td>12</td>
          <td>13</td>
          <td>14</td>
          <td>15</td>
      </tr>
  </tbody>
</table>
<p>输出</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>0 4 5 1 2 3 7 11 10 9 13 14 15
</span></span></code></pre></div><p><strong>运行限制:</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>最大运行时间：1s 最大运行内存: 128M
</span></span></code></pre></div><p><strong>解题思路:</strong></p>
<p>这里用一个 $N \times N$ 的矩阵来表示城堡的位置，横向、纵向标号 $1-N$。</p>
<p>我们采用逆推法，既然原题目是走到哪里射一支箭，那我们就走到那里之后拔一支箭，如果最后得到所有的靶子上都没有箭了，由于题目的路径唯一，那就证明我们找到了题目所要求的路径。</p>
<ol>
<li>
<p>算法开始：</p>
<p>当前行设为第一行，当前列设为第一列，从第一行第一列开始搜索。</p>
<p>然后从左上角初始位置，按照题目意思进行寻路。</p>
</li>
<li>
<p>判断边界：</p>
<p>在当前行，当前列的位置上判断是否满足条件，若不满足，跳到第 $5$ 步，即不符合边界条件。 判断条件如下：</p>
<ul>
<li>$flag[x][y]$==1 标记数组已经被标记,已被走过，不能再走，超出边界</li>
<li>$x&lt;1$ 从左侧走出方格。</li>
<li>$x&gt;n$ 从右侧走出方格。</li>
<li>$y&lt;1$ 从上侧走出方格。</li>
<li>$y&gt;n$ 从下侧走出方格。</li>
<li>$col[x]&lt;=0$ 没走到右下角，箭用完了。</li>
<li>$rol[y]&lt;=0$ 没走到右下角，箭用完了</li>
</ul>
</li>
<li>
<p>搜索过程：</p>
<p>调用 <code>Check</code> 函数。 如果边界条件满足，就继续调用搜索，找到下一步的位置</p>
</li>
<li>
<p>check(参数):</p>
<p>如果当搜索到 $x=n,y=n$ 时，且靶子上的箭都没了，按就找到了答案。</p>
<p>按照题目输出即可。</p>
</li>
<li>
<p>在当前位置上不满足条件的情形，进行回溯，并还原现场</p>
</li>
</ol>
<p>C++ 语言描述:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#include</span> <span style="color:#999;font-weight:bold;font-style:italic">&lt;bits/stdc++.h&gt;</span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">using</span> <span style="color:#000;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">struct</span> <span style="color:#458;font-weight:bold">PII</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">int</span> first;
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">int</span> second;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">const</span> <span style="color:#458;font-weight:bold">int</span> N <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">30</span>;
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> rol[N];
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> col[N];
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> n;<span style="color:#998;font-style:italic">//格子数 长宽从1到n
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#458;font-weight:bold">bool</span> flag[N][N]; <span style="color:#998;font-style:italic">//用来标记是否走过
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>vector<span style="color:#000;font-weight:bold">&lt;</span>PII<span style="color:#000;font-weight:bold">&gt;</span> res;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//---------图的路径搜索常用方向移动表示-------
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> dx[<span style="color:#099">4</span>]<span style="color:#000;font-weight:bold">=</span> {<span style="color:#099">0</span>,<span style="color:#099">1</span>,<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>,<span style="color:#099">0</span>};
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> dy[<span style="color:#099">4</span>]<span style="color:#000;font-weight:bold">=</span> {<span style="color:#099">1</span>,<span style="color:#099">0</span>,<span style="color:#099">0</span>,<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// 两两组合形成上下左右四个方向
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//      1------------------&gt; x
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//      |
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//      |
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//      |
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//      |
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//      |
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//      |
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//      |
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//      ↓
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//      y
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// dx[0]=0 dy[0]=1 那么代表向下的方向
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// dx[1]=1 dy[1]=0 那么代表向右的方向
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// dx[2]=-1 dy[0]=0 那么代表向左的方向
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// dx[3]=0 dy[1]=-1 那么代表向上的方向
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//--------------------------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">bool</span>  <span style="color:#900;font-weight:bold">check</span>(<span style="color:#458;font-weight:bold">int</span> x, <span style="color:#458;font-weight:bold">int</span> y) <span style="color:#998;font-style:italic">//判断走过的路径的箭靶数是否与目标相同
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span>(x<span style="color:#000;font-weight:bold">==</span>n <span style="color:#000;font-weight:bold">&amp;&amp;</span> y<span style="color:#000;font-weight:bold">==</span>n)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span> i<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>; i<span style="color:#000;font-weight:bold">&lt;=</span>n; i<span style="color:#000;font-weight:bold">++</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">if</span>(col[i]<span style="color:#000;font-weight:bold">!=</span><span style="color:#099">0</span>)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">return</span> <span style="color:#0086b3">false</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//如果箭靶上的数目不为0，根据逆推，我们通过当前路径得不到箭靶上的结果
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span> i<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>; i<span style="color:#000;font-weight:bold">&lt;=</span>n; i<span style="color:#000;font-weight:bold">++</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">if</span>(rol[i]<span style="color:#000;font-weight:bold">!=</span><span style="color:#099">0</span>)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">return</span> <span style="color:#0086b3">false</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//如果箭靶上的数目不为0，根据逆推，我们通过当前路径得不到箭靶上的结果
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span> i<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>; i<span style="color:#000;font-weight:bold">&lt;</span>res.size(); i<span style="color:#000;font-weight:bold">++</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#458;font-weight:bold">int</span> x<span style="color:#000;font-weight:bold">=</span>res[i].first;
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//x 轴坐标
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            <span style="color:#458;font-weight:bold">int</span> y<span style="color:#000;font-weight:bold">=</span>res[i].second;
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//y 轴坐标
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            <span style="color:#458;font-weight:bold">int</span> sum<span style="color:#000;font-weight:bold">=</span>n<span style="color:#000;font-weight:bold">*</span>(x<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>)<span style="color:#000;font-weight:bold">+</span>y<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span> ;
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">// 通过计算的到为题目要求的坐标系
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            cout <span style="color:#000;font-weight:bold">&lt;&lt;</span>sum<span style="color:#000;font-weight:bold">&lt;&lt;</span> <span style="color:#d14">&#34; &#34;</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        cout <span style="color:#000;font-weight:bold">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#0086b3">false</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">// 成功终止
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> <span style="color:#0086b3">true</span>; <span style="color:#998;font-style:italic">//继续搜索
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#998;font-style:italic">//关于终止还是继续我们交给判定即可
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>}
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">bool</span> <span style="color:#900;font-weight:bold">pd</span>(<span style="color:#458;font-weight:bold">int</span> x2,<span style="color:#458;font-weight:bold">int</span> y2) <span style="color:#998;font-style:italic">//边界判断
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span>(flag[x2][y2]<span style="color:#000;font-weight:bold">==</span><span style="color:#099">1</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//已被走过，不能再走，超出边界
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">if</span>(x2<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">1</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//从左侧走出方格
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">if</span>(x2<span style="color:#000;font-weight:bold">&gt;</span>n)
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//从右侧走出方格
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">if</span>(y2<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">1</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//从上侧走出方格
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">if</span>(y2<span style="color:#000;font-weight:bold">&gt;</span>n)
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//从下侧走出方格
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">if</span>(col[x2]<span style="color:#000;font-weight:bold">&lt;=</span><span style="color:#099">0</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//没走到右下角，箭用完了
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">if</span>(rol[y2]<span style="color:#000;font-weight:bold">&lt;=</span><span style="color:#099">0</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//没走到右下角，箭用完了
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//符合边界条件，可以继续执行搜索
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">dfs</span>(<span style="color:#458;font-weight:bold">int</span> x,<span style="color:#458;font-weight:bold">int</span> y)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span>(<span style="color:#000;font-weight:bold">!</span>check(x,y))
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> ;
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//包含不符合规则的地方，回溯，用于剪枝
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">else</span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span> i<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>; i<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">4</span>; i<span style="color:#000;font-weight:bold">++</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#458;font-weight:bold">int</span> xt<span style="color:#000;font-weight:bold">=</span>dx[i]<span style="color:#000;font-weight:bold">+</span>x;
</span></span><span style="display:flex;"><span>            <span style="color:#458;font-weight:bold">int</span> yt<span style="color:#000;font-weight:bold">=</span>dy[i]<span style="color:#000;font-weight:bold">+</span>y;
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">if</span>(<span style="color:#000;font-weight:bold">!</span>pd(xt,yt))
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">continue</span> ;
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic">//不符合要求继续换方向搜索
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">else</span>
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic">//因为要进行位置转移，我们给它起个名字，叫作案现场
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>                <span style="color:#998;font-style:italic">//比如向下移动
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>                flag[xt][yt]<span style="color:#000;font-weight:bold">=</span><span style="color:#0086b3">true</span>;
</span></span><span style="display:flex;"><span>                col[xt]<span style="color:#000;font-weight:bold">--</span>;
</span></span><span style="display:flex;"><span>                rol[yt]<span style="color:#000;font-weight:bold">--</span>;
</span></span><span style="display:flex;"><span>                res.push_back({xt,yt});
</span></span><span style="display:flex;"><span>                dfs(xt,yt);
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic">//搜索回溯后，因为没有找到正确答案，所以要回复作案现场，返回到搜索之前
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>                res.pop_back();
</span></span><span style="display:flex;"><span>                flag[xt][yt]<span style="color:#000;font-weight:bold">=</span><span style="color:#0086b3">false</span>;
</span></span><span style="display:flex;"><span>                col[xt]<span style="color:#000;font-weight:bold">++</span>;
</span></span><span style="display:flex;"><span>                rol[yt]<span style="color:#000;font-weight:bold">++</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    cin <span style="color:#000;font-weight:bold">&gt;&gt;</span> n;
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span> i<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>; i<span style="color:#000;font-weight:bold">&lt;=</span>n; i<span style="color:#000;font-weight:bold">++</span>)
</span></span><span style="display:flex;"><span>        cin <span style="color:#000;font-weight:bold">&gt;&gt;</span> rol[i];
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span> i<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>; i<span style="color:#000;font-weight:bold">&lt;=</span>n; i<span style="color:#000;font-weight:bold">++</span>)
</span></span><span style="display:flex;"><span>        cin <span style="color:#000;font-weight:bold">&gt;&gt;</span> col[i];
</span></span><span style="display:flex;"><span>    flag[<span style="color:#099">1</span>][<span style="color:#099">1</span>]<span style="color:#000;font-weight:bold">=</span><span style="color:#0086b3">true</span>;
</span></span><span style="display:flex;"><span>    col[<span style="color:#099">1</span>]<span style="color:#000;font-weight:bold">--</span>;
</span></span><span style="display:flex;"><span>    rol[<span style="color:#099">1</span>]<span style="color:#000;font-weight:bold">--</span>;
</span></span><span style="display:flex;"><span>    res.push_back({<span style="color:#099">1</span>,<span style="color:#099">1</span>});
</span></span><span style="display:flex;"><span>    dfs(<span style="color:#099">1</span>,<span style="color:#099">1</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Python 语言描述:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>flag <span style="color:#000;font-weight:bold">=</span> [[<span style="color:#099">0</span> <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(<span style="color:#099">26</span>)] <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(<span style="color:#099">27</span>)]
</span></span><span style="display:flex;"><span>resX <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">0</span> <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(<span style="color:#099">1000</span>)]
</span></span><span style="display:flex;"><span>resY <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">0</span> <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(<span style="color:#099">1000</span>)]
</span></span><span style="display:flex;"><span>resCount <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># ---------图的路径搜索常用方向移动表示-------</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>dx <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">0</span>, <span style="color:#099">1</span>, <span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>, <span style="color:#099">0</span>]
</span></span><span style="display:flex;"><span>dy <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">1</span>, <span style="color:#099">0</span>, <span style="color:#099">0</span>, <span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># 两两组合形成上下左右四个方向</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      1------------------&gt; x</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      |</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      |</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      |</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      |</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      |</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      |</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      |</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      ↓</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      y</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># dx[0]=0 dy[0]=1 那么代表向下的方向</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># dx[1]=1 dy[1]=0 那么代表向右的方向</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># dx[2]=-1 dy[0]=0 那么代表向左的方向</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># dx[3]=0 dy[1]=-1 那么代表向上的方向</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># --------------------------------------------</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">def</span> <span style="color:#900;font-weight:bold">check</span>(x, y):
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">global</span> n
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> x <span style="color:#000;font-weight:bold">==</span> n <span style="color:#000;font-weight:bold">&amp;</span> y <span style="color:#000;font-weight:bold">==</span> n:
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic"># print(&#34;check point1&#34;)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(<span style="color:#099">1</span>, n <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>):
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">if</span> (col[i] <span style="color:#000;font-weight:bold">!=</span> <span style="color:#099">0</span>):
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic"># 如果箭靶上的数目不为0，根据逆推，我们通过当前路径得不到箭靶上的结果</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(<span style="color:#099">1</span>, n <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>):
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">if</span> (rol[i] <span style="color:#000;font-weight:bold">!=</span> <span style="color:#099">0</span>):
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(<span style="color:#099">0</span>, resCount):
</span></span><span style="display:flex;"><span>            x2 <span style="color:#000;font-weight:bold">=</span> resX[i]
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic"># x 轴坐标</span>
</span></span><span style="display:flex;"><span>            y2 <span style="color:#000;font-weight:bold">=</span> resY[i]
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic"># y 轴坐标</span>
</span></span><span style="display:flex;"><span>            <span style="color:#0086b3">sum</span> <span style="color:#000;font-weight:bold">=</span> n <span style="color:#000;font-weight:bold">*</span> (x2 <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>) <span style="color:#000;font-weight:bold">+</span> y2 <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic"># 通过计算的到为题目要求的坐标系</span>
</span></span><span style="display:flex;"><span>            <span style="color:#0086b3">print</span>(<span style="color:#0086b3">sum</span>, end<span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34; &#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic"># 成功终止</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">else</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">True</span>  <span style="color:#998;font-style:italic"># 继续搜索</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic"># 关于终止还是继续我们交给判定即可</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">def</span> <span style="color:#900;font-weight:bold">pd</span>(x2, y2):
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">global</span> n
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># print(&#34;x2 :&#34;, x2,&#34;y2 :&#34;, y2, &#34; n &#34;, n)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> flag[x2][y2] <span style="color:#000;font-weight:bold">==</span> <span style="color:#099">1</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic"># print(&#34;checkPoint3&#34;)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic"># 已被走过，不能再走，超出边界</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">elif</span> x2 <span style="color:#000;font-weight:bold">&lt;</span> <span style="color:#099">1</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic"># print(&#34;checkPoint5&#34;)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># 从左侧走出方格</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">elif</span> x2 <span style="color:#000;font-weight:bold">&gt;</span> n:
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic"># print(&#34;checkPoint6&#34;)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># 从右侧走出方格</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">elif</span> col[x2] <span style="color:#000;font-weight:bold">&lt;=</span> <span style="color:#099">0</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic"># print(&#34;checkPoint8&#34;)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># 没走到右下角，箭用完了</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">elif</span> y2 <span style="color:#000;font-weight:bold">&lt;</span> <span style="color:#099">1</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic"># print(&#34;checkPoint7&#34;)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># 从上侧走出方格</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">elif</span> y2 <span style="color:#000;font-weight:bold">&gt;</span> n:
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic"># print(&#34;y2 :&#34;,y2,&#34; n &#34;,n)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># 从下侧走出方格</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">elif</span> rol[y2] <span style="color:#000;font-weight:bold">&lt;=</span> <span style="color:#099">0</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic"># print(&#34;checkPoint9&#34;)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># 没走到右下角，箭用完了</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">else</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">True</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># 符合边界条件，可以继续执行搜索</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">def</span> <span style="color:#900;font-weight:bold">dfs</span>(x, y):
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> check(x, y):
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># 包含不符合规则的地方，回溯，用于剪枝</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">else</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(<span style="color:#099">0</span>, <span style="color:#099">4</span>):
</span></span><span style="display:flex;"><span>            xt <span style="color:#000;font-weight:bold">=</span> dx[i] <span style="color:#000;font-weight:bold">+</span> x
</span></span><span style="display:flex;"><span>            yt <span style="color:#000;font-weight:bold">=</span> dy[i] <span style="color:#000;font-weight:bold">+</span> y
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic"># print(xt, yt)</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> pd(xt, yt):
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic"># print(&#34;CheckPoint&#34;, xt, yt)</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">continue</span>
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic"># 不符合要求继续换方向搜索</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">else</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic"># 因为要进行位置转移，我们给它起个名字，叫作案现场</span>
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic"># 比如向下移动</span>
</span></span><span style="display:flex;"><span>                col[xt] <span style="color:#000;font-weight:bold">-=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>                rol[yt] <span style="color:#000;font-weight:bold">-=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>                flag[xt][yt] <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">global</span> resCount
</span></span><span style="display:flex;"><span>                resX[resCount] <span style="color:#000;font-weight:bold">=</span> xt
</span></span><span style="display:flex;"><span>                resY[resCount] <span style="color:#000;font-weight:bold">=</span> yt
</span></span><span style="display:flex;"><span>                resCount <span style="color:#000;font-weight:bold">+=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic"># print(&#34;---------123-------&#34;)</span>
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic"># print(flag)</span>
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic"># print(&#34;----------------&#34;)</span>
</span></span><span style="display:flex;"><span>                dfs(xt, yt)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic"># 搜索回溯后，因为没有找到正确答案，所以要回复作案现场，返回到搜索之前</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                resCount <span style="color:#000;font-weight:bold">-=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>                flag[xt][yt] <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic"># print(&#34;--------321--------&#34;)</span>
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic"># print(flag)</span>
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic"># print(&#34;----------------&#34;)</span>
</span></span><span style="display:flex;"><span>                col[xt] <span style="color:#000;font-weight:bold">+=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>                rol[yt] <span style="color:#000;font-weight:bold">+=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">if</span> __name__ <span style="color:#000;font-weight:bold">==</span> <span style="color:#d14">&#39;__main__&#39;</span>:
</span></span><span style="display:flex;"><span>    n <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">int</span>(<span style="color:#0086b3">input</span>())
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># print(&#34;----------------&#34;)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># print(flag)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># print(&#34;----------------&#34;)</span>
</span></span><span style="display:flex;"><span>    rol <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">input</span>()<span style="color:#000;font-weight:bold">.</span>split()
</span></span><span style="display:flex;"><span>    rol <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">list</span>(<span style="color:#0086b3">map</span>(<span style="color:#0086b3">int</span>, rol))
</span></span><span style="display:flex;"><span>    rol <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">0</span>] <span style="color:#000;font-weight:bold">+</span> rol
</span></span><span style="display:flex;"><span>    col <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">input</span>()<span style="color:#000;font-weight:bold">.</span>split()
</span></span><span style="display:flex;"><span>    col <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">list</span>(<span style="color:#0086b3">map</span>(<span style="color:#0086b3">int</span>, col))
</span></span><span style="display:flex;"><span>    col <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">0</span>] <span style="color:#000;font-weight:bold">+</span> col
</span></span><span style="display:flex;"><span>    flag[<span style="color:#099">1</span>][<span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># print(&#34;----------------&#34;)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># print(flag)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># print(&#34;----------------&#34;)</span>
</span></span><span style="display:flex;"><span>    col[<span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">-=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>    rol[<span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">-=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>    resX[resCount] <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>    resY[resCount] <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>    resCount <span style="color:#000;font-weight:bold">+=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>    dfs(<span style="color:#099">1</span>, <span style="color:#099">1</span>)
</span></span></code></pre></div><p>然而需要注意的是上面代码会超时，我们要对其进行优化，因为同样的计算 Python 运行时间相比 C++ 要长很多，这里给 C++ 和 Python 相同的时间，确实是难为 Python 了。 因为上面是为了给大家系统的将一个框架，而这道题目的时间复杂度相对较高，Python 的运行时间是 C++ 10 倍甚至几十倍，这个题目，同样的复杂度，Python 给的时间是不好通过这个题目的，我优化了十几遍，确实通过不了。</p>
<p>Java 语言描述:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#555">java.util.Scanner</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#555">java.util.Vector</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">import static</span><span style="color:#bbb"> </span><span style="color:#555">java.lang.Math.abs</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Main</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">final</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>N<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>30;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>rol<span style="color:#000;font-weight:bold">[]=</span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">[</span>N<span style="color:#000;font-weight:bold">]</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>col<span style="color:#000;font-weight:bold">[]=</span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">[</span>N<span style="color:#000;font-weight:bold">]</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>n;<span style="color:#998;font-style:italic">//格子数 长宽从1到n</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb">  </span><span style="color:#458;font-weight:bold">boolean</span><span style="color:#bbb"> </span>flag<span style="color:#000;font-weight:bold">[][]=</span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">boolean</span><span style="color:#000;font-weight:bold">[</span>N<span style="color:#000;font-weight:bold">][</span>N<span style="color:#000;font-weight:bold">]</span>;<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">//用来标记是否走过</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>resX<span style="color:#000;font-weight:bold">[]=</span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">[</span>1000<span style="color:#000;font-weight:bold">]</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>resY<span style="color:#000;font-weight:bold">[]=</span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">[</span>1000<span style="color:#000;font-weight:bold">]</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>resCount<span style="color:#000;font-weight:bold">=</span>0;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//---------图的路径搜索常用方向移动表示-------</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>dx<span style="color:#000;font-weight:bold">[]=</span><span style="color:#bbb"> </span>{0,1,<span style="color:#000;font-weight:bold">-</span>1,0};<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb">  </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>dy<span style="color:#000;font-weight:bold">[]=</span><span style="color:#bbb"> </span>{1,0,0,<span style="color:#000;font-weight:bold">-</span>1};<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// 两两组合形成上下左右四个方向</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//      1------------------&gt; x</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//      |</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//      |</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//      |</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//      |</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//      |</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//      |</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//      |</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//      ↓</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//      y</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// dx[0]=0 dy[0]=1 那么代表向下的方向</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// dx[1]=1 dy[1]=0 那么代表向右的方向</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// dx[2]=-1 dy[0]=0 那么代表向左的方向</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// dx[3]=0 dy[1]=-1 那么代表向上的方向</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//--------------------------------------------</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">boolean</span><span style="color:#bbb">  </span><span style="color:#900;font-weight:bold">check</span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>x,<span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>y)<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">//判断走过的路径的箭靶数是否与目标相同</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">if</span>(x<span style="color:#000;font-weight:bold">==</span>n<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&amp;&amp;</span><span style="color:#bbb"> </span>y<span style="color:#000;font-weight:bold">==</span>n)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">=</span>1;<span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">&lt;=</span>n;<span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">++</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">if</span>(col<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]!=</span>0)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#998;font-style:italic">//如果箭靶上的数目不为0，根据逆推，我们通过当前路径得不到箭靶上的结果</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">=</span>1;<span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">&lt;=</span>n;<span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">++</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">if</span>(rol<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]!=</span>0)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#998;font-style:italic">//如果箭靶上的数目不为0，根据逆推，我们通过当前路径得不到箭靶上的结果</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">=</span>0;<span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">&lt;</span>resCount;<span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">++</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>x2<span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>resX<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#998;font-style:italic">//x 轴坐标</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>y2<span style="color:#000;font-weight:bold">=</span>resY<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#998;font-style:italic">//y 轴坐标</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>sum<span style="color:#000;font-weight:bold">=</span>n<span style="color:#000;font-weight:bold">*</span>(x2<span style="color:#000;font-weight:bold">-</span>1)<span style="color:#000;font-weight:bold">+</span>y2<span style="color:#000;font-weight:bold">-</span>1<span style="color:#bbb"> </span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#998;font-style:italic">// 通过计算的到为题目要求的坐标系</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">print</span>(sum<span style="color:#000;font-weight:bold">+</span><span style="color:#d14">&#34; &#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic">// 成功终止</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span>;<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">//继续搜索</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic">//关于终止还是继续我们交给判定即可</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">boolean</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">pd</span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>x2,<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>y2)<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">//边界判断</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">if</span>(flag<span style="color:#000;font-weight:bold">[</span>x2<span style="color:#000;font-weight:bold">][</span>y2<span style="color:#000;font-weight:bold">]</span><span style="color:#bbb"> </span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic">//已被走过，不能再走，超出边界</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">if</span>(x2<span style="color:#000;font-weight:bold">&lt;</span>1)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic">//从左侧走出方格</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">if</span>(x2<span style="color:#000;font-weight:bold">&gt;</span>n)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic">//从右侧走出方格</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">if</span>(y2<span style="color:#000;font-weight:bold">&lt;</span>1)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic">//从上侧走出方格</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">if</span>(y2<span style="color:#000;font-weight:bold">&gt;</span>n)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic">//从下侧走出方格</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">if</span>(col<span style="color:#000;font-weight:bold">[</span>x2<span style="color:#000;font-weight:bold">]&lt;=</span>0)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic">//没走到右下角，箭用完了</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">if</span>(rol<span style="color:#000;font-weight:bold">[</span>y2<span style="color:#000;font-weight:bold">]&lt;=</span>0)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic">//没走到右下角，箭用完了</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic">//符合边界条件，可以继续执行搜索</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">dfs</span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>x,<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>y)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">if</span>(<span style="color:#000;font-weight:bold">!</span>check(x,y))<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic">//包含不符合规则的地方，回溯，用于剪枝</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">else</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">=</span>0;<span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">&lt;</span>4;<span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">++</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>xt<span style="color:#000;font-weight:bold">=</span>dx<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]+</span>x;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>yt<span style="color:#000;font-weight:bold">=</span>dy<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]+</span>y;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">if</span>(<span style="color:#000;font-weight:bold">!</span>pd(xt,yt))<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span><span style="color:#000;font-weight:bold">continue</span><span style="color:#bbb"> </span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span><span style="color:#998;font-style:italic">//不符合要求继续换方向搜索</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">else</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span><span style="color:#998;font-style:italic">//因为要进行位置转移，我们给它起个名字，叫作案现场</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span><span style="color:#998;font-style:italic">//比如向下移动</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>flag<span style="color:#000;font-weight:bold">[</span>xt<span style="color:#000;font-weight:bold">][</span>yt<span style="color:#000;font-weight:bold">]=</span><span style="color:#000;font-weight:bold">true</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>col<span style="color:#000;font-weight:bold">[</span>xt<span style="color:#000;font-weight:bold">]--</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>rol<span style="color:#000;font-weight:bold">[</span>yt<span style="color:#000;font-weight:bold">]--</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>resX<span style="color:#000;font-weight:bold">[</span>resCount<span style="color:#000;font-weight:bold">]=</span>xt;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>resY<span style="color:#000;font-weight:bold">[</span>resCount<span style="color:#000;font-weight:bold">++]=</span>yt;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>dfs(xt,yt);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span><span style="color:#998;font-style:italic">//搜索回溯后，因为没有找到正确答案，所以要回复作案现场，返回到搜索之前</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>resCount<span style="color:#000;font-weight:bold">--</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>flag<span style="color:#000;font-weight:bold">[</span>xt<span style="color:#000;font-weight:bold">][</span>yt<span style="color:#000;font-weight:bold">]=</span><span style="color:#000;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>col<span style="color:#000;font-weight:bold">[</span>xt<span style="color:#000;font-weight:bold">]++</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>rol<span style="color:#000;font-weight:bold">[</span>yt<span style="color:#000;font-weight:bold">]++</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">main</span>(String<span style="color:#000;font-weight:bold">[]</span><span style="color:#bbb"> </span>args)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>Scanner<span style="color:#bbb"> </span>in<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Scanner(System.<span style="color:#008080">in</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>n<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>in.<span style="color:#008080">nextInt</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">=</span>1;<span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">&lt;=</span>n;<span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">++</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>rol<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]=</span>in.<span style="color:#008080">nextInt</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">=</span>1;<span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">&lt;=</span>n;<span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">++</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">             </span>col<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]=</span>in.<span style="color:#008080">nextInt</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>flag<span style="color:#000;font-weight:bold">[</span>1<span style="color:#000;font-weight:bold">][</span>1<span style="color:#000;font-weight:bold">]=</span><span style="color:#000;font-weight:bold">true</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>col<span style="color:#000;font-weight:bold">[</span>1<span style="color:#000;font-weight:bold">]--</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>rol<span style="color:#000;font-weight:bold">[</span>1<span style="color:#000;font-weight:bold">]--</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>resX<span style="color:#000;font-weight:bold">[</span>resCount<span style="color:#000;font-weight:bold">]=</span>1;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>resY<span style="color:#000;font-weight:bold">[</span>resCount<span style="color:#000;font-weight:bold">++]=</span>1;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>dfs(1,1);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><h3 id="最大数字">最大数字</h3>
<p>给定一个正整数 $N$ 。你可以对 $N$ 的任意一位数字执行任意次以下 $2$ 种操 作：</p>
<ol>
<li>
<p>将该位数字加 $1$ 。如果该位数字已经是 $9$ , 加 $1$ 之后变成 $0$ 。</p>
</li>
<li>
<p>将该位数字减 $1$ 。如果该位数字已经是 $0$ , 减 $1$ 之后变成 $9$ 。</p>
</li>
</ol>
<p>你现在总共可以执行 $1$ 号操作不超过 $A$ 次, $2$ 号操作不超过 $B$ 次。 请问你最大可以将 $N$ 变成多少?</p>
<p><strong>解题思路:</strong></p>
<p>看上去 $N$ 的范围貌似很大，达到了 <code>1e17</code> 的范围，但其实我们最多只需要考虑这最多 <code>17</code> 位数，所以可以想到爆搜得到答案。</p>
<p>一个数的大小是从左到右依次判断，所以我们从最左边开始枚举，我们无需关注后面的数，要利用自己的 <code>1</code> 号操作和 <code>2</code> 号操作 <strong>保证当前这个数位的数一定要尽可能最大</strong></p>
<p>然后分别考虑两种操作，首先两种操作不可能混用，因为它们是抵消的效果，所以要么对这个数全使用 <code>1</code> 操作，要么 <code>2</code> 操作。假设某个数位的值为 <code>x</code>,首先考虑 <code>1</code> 号操作，使用后可以让该数位变大，出于<strong>贪心</strong>考虑，我们想让它变成 <code>9</code>，那么需要进行 <code>9-x</code> 次 <code>1</code> 号操作，当然可能此时 <code>1</code> 号操作并不足以让我们将 <code>x</code> 变成 <code>9</code>，但我们还是使用剩余的全部的次数将其变大，所以每次考虑 <code>1</code> 号操作应该使用的操作数 <code>t</code> 应该为 <code>t=min(n,9-x)</code>,此时 <code>x</code> 将变为 <code>x+t</code>，然后进行下一位的判断。</p>
<p>其次我们考虑 <code>2</code> 号操作，这个的判断比较简单，它是让某个值减小，唯一能让某个数变大的机会就是将其减到 <code>0</code> 后再减就会变成 <code>9</code>。那么这样操作需要的次数就是 <code>x+1</code>，如果操作次数不够，那我们宁愿不使用，因为这只会让这个数位变得更小。</p>
<p>在深搜 <code>dfs</code> 的过程中，参数记录遍历到第几个数位以及此时累计的和，当搜索完所有数位后，将此时的和与答案进行一个取 <code>max</code>，最后的值则为答案。</p>
<p>C++ 语言描述：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#include</span><span style="color:#999;font-weight:bold;font-style:italic">&lt;bits/stdc++.h&gt;</span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic"></span>using namespace std;
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">typedef</span> <span style="color:#458;font-weight:bold">long</span> <span style="color:#458;font-weight:bold">long</span> LL;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">char</span> c[<span style="color:#099">20</span>];
</span></span><span style="display:flex;"><span>LL ans<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//n:1号操作剩余次数  m:2号操作剩余次数
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#458;font-weight:bold">int</span> n,m;
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">dfs</span>(<span style="color:#458;font-weight:bold">int</span> i,LL v){
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">int</span> x<span style="color:#000;font-weight:bold">=</span>c[i]<span style="color:#000;font-weight:bold">-</span><span style="color:#d14">&#39;0&#39;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span>(c[i]){
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//应该使用的操作次数
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        <span style="color:#458;font-weight:bold">int</span> t<span style="color:#000;font-weight:bold">=</span><span style="color:#900;font-weight:bold">min</span>(n,<span style="color:#099">9</span><span style="color:#000;font-weight:bold">-</span>x);
</span></span><span style="display:flex;"><span>        n<span style="color:#000;font-weight:bold">-=</span>t;
</span></span><span style="display:flex;"><span>        <span style="color:#900;font-weight:bold">dfs</span>(i<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>,v<span style="color:#000;font-weight:bold">*</span><span style="color:#099">10</span><span style="color:#000;font-weight:bold">+</span>x<span style="color:#000;font-weight:bold">+</span>t);
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//回溯
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        n<span style="color:#000;font-weight:bold">+=</span>t;
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//考虑操作2是否能够使用
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        <span style="color:#000;font-weight:bold">if</span>(m<span style="color:#000;font-weight:bold">&gt;</span>x){
</span></span><span style="display:flex;"><span>            m<span style="color:#000;font-weight:bold">-=</span>x<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#900;font-weight:bold">dfs</span>(i<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>,v<span style="color:#000;font-weight:bold">*</span><span style="color:#099">10</span><span style="color:#000;font-weight:bold">+</span><span style="color:#099">9</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//回溯
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            m<span style="color:#000;font-weight:bold">+=</span>x<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }<span style="color:#000;font-weight:bold">else</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//答案取max
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        ans<span style="color:#000;font-weight:bold">=</span><span style="color:#900;font-weight:bold">max</span>(ans,v);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#900;font-weight:bold">scanf</span>(<span style="color:#d14">&#34;%s%d%d&#34;</span>,c,<span style="color:#000;font-weight:bold">&amp;</span>n,<span style="color:#000;font-weight:bold">&amp;</span>m);
</span></span><span style="display:flex;"><span>    <span style="color:#900;font-weight:bold">dfs</span>(<span style="color:#099">0</span>,<span style="color:#099">0</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#900;font-weight:bold">printf</span>(<span style="color:#d14">&#34;%lld</span><span style="color:#d14">\n</span><span style="color:#d14">&#34;</span>,ans);
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Java 语言描述:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#555">java.io.*</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Main</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span>BufferedReader<span style="color:#bbb"> </span>br<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>BufferedReader(<span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>InputStreamReader(System.<span style="color:#008080">in</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span>PrintWriter<span style="color:#bbb"> </span>out<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>PrintWriter(<span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>OutputStreamWriter(System.<span style="color:#008080">out</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span>String<span style="color:#bbb"> </span>t;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>a,<span style="color:#bbb"> </span>b,<span style="color:#bbb"> </span>m;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">long</span><span style="color:#bbb"> </span>ans<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>0;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic">// i 表示考虑到第i位  v表示当前的值是多少</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">dfs</span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>i,<span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">long</span><span style="color:#bbb"> </span>v)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>(i<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">==</span><span style="color:#bbb"> </span>m)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>ans<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>Math.<span style="color:#008080">max</span>(ans,<span style="color:#bbb"> </span>v);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">return</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>c<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>t.<span style="color:#008080">charAt</span>(i)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">-</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;0&#39;</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic">//考虑第一种使用</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>g<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>Math.<span style="color:#008080">min</span>(a,<span style="color:#bbb"> </span>9<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">-</span><span style="color:#bbb"> </span>c);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>a<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">-=</span><span style="color:#bbb"> </span>g;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>dfs(i<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>1,<span style="color:#bbb"> </span>v<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">*</span><span style="color:#bbb"> </span>10<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>c<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>g);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic">//回溯</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>a<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+=</span><span style="color:#bbb"> </span>g;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic">//考虑第二种使用   我一定要减到9  只有b&gt;c 才能减到9</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>(b<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>c)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>b<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">-=</span><span style="color:#bbb"> </span>c<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>1;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>dfs(i<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>1,<span style="color:#bbb"> </span>v<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">*</span><span style="color:#bbb"> </span>10<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>9);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic">//回溯</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>b<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+=</span><span style="color:#bbb"> </span>c<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>1;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">main</span>(String<span style="color:#000;font-weight:bold">[]</span><span style="color:#bbb"> </span>args)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">throws</span><span style="color:#bbb"> </span>IOException<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>String<span style="color:#000;font-weight:bold">[]</span><span style="color:#bbb"> </span>s<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>br.<span style="color:#008080">readLine</span>().<span style="color:#008080">trim</span>().<span style="color:#008080">split</span>(<span style="color:#d14">&#34; &#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>t<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>s<span style="color:#000;font-weight:bold">[</span>0<span style="color:#000;font-weight:bold">]</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>m<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>t.<span style="color:#008080">length</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>a<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>Integer.<span style="color:#008080">parseInt</span>(s<span style="color:#000;font-weight:bold">[</span>1<span style="color:#000;font-weight:bold">]</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>b<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>Integer.<span style="color:#008080">parseInt</span>(s<span style="color:#000;font-weight:bold">[</span>2<span style="color:#000;font-weight:bold">]</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>dfs(0,<span style="color:#bbb"> </span>0);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>out.<span style="color:#008080">println</span>(ans);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>out.<span style="color:#008080">flush</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><p>Python 语言描述:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">import</span> <span style="color:#555">sys</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>t <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>a <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>b <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>m <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>ans <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">def</span> <span style="color:#900;font-weight:bold">dfs</span>(i, v):
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">global</span> ans, a, b, t
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> i <span style="color:#000;font-weight:bold">==</span> m:
</span></span><span style="display:flex;"><span>        ans <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">max</span>(ans, v)
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span>
</span></span><span style="display:flex;"><span>    c <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">int</span>(t[i])
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># 考虑第一种使用</span>
</span></span><span style="display:flex;"><span>    g <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">min</span>(a, <span style="color:#099">9</span> <span style="color:#000;font-weight:bold">-</span> c)
</span></span><span style="display:flex;"><span>    a <span style="color:#000;font-weight:bold">-=</span> g
</span></span><span style="display:flex;"><span>    dfs(i <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>, v <span style="color:#000;font-weight:bold">*</span> <span style="color:#099">10</span> <span style="color:#000;font-weight:bold">+</span> c <span style="color:#000;font-weight:bold">+</span> g)
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># 回溯</span>
</span></span><span style="display:flex;"><span>    a <span style="color:#000;font-weight:bold">+=</span> g
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># 考虑第二种使用   我一定要减到9  只有b&gt;c 才能减到9</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> b <span style="color:#000;font-weight:bold">&gt;</span> c:
</span></span><span style="display:flex;"><span>        b <span style="color:#000;font-weight:bold">-=</span> c <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>        dfs(i <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>, v <span style="color:#000;font-weight:bold">*</span> <span style="color:#099">10</span> <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">9</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic"># 回溯</span>
</span></span><span style="display:flex;"><span>        b <span style="color:#000;font-weight:bold">+=</span> c <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">def</span> <span style="color:#900;font-weight:bold">main</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">global</span> ans, a, b, t, m
</span></span><span style="display:flex;"><span>    line <span style="color:#000;font-weight:bold">=</span> sys<span style="color:#000;font-weight:bold">.</span>stdin<span style="color:#000;font-weight:bold">.</span>readline()<span style="color:#000;font-weight:bold">.</span>strip()
</span></span><span style="display:flex;"><span>    s <span style="color:#000;font-weight:bold">=</span> line<span style="color:#000;font-weight:bold">.</span>split()
</span></span><span style="display:flex;"><span>    t <span style="color:#000;font-weight:bold">=</span> s[<span style="color:#099">0</span>]
</span></span><span style="display:flex;"><span>    m <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">len</span>(t)
</span></span><span style="display:flex;"><span>    a <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">int</span>(s[<span style="color:#099">1</span>])
</span></span><span style="display:flex;"><span>    b <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">int</span>(s[<span style="color:#099">2</span>])
</span></span><span style="display:flex;"><span>    dfs(<span style="color:#099">0</span>, <span style="color:#099">0</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#0086b3">print</span>(ans)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">if</span> __name__ <span style="color:#000;font-weight:bold">==</span> <span style="color:#d14">&#34;__main__&#34;</span>:
</span></span><span style="display:flex;"><span>    main()
</span></span></code></pre></div><h2 id="实验总结">实验总结</h2>
<p>DFS 是一种非常重要的回溯算法，它是通过递归设计转移状态，再加上边界判断，与结果检查，构成的基本搜索框架。</p>
<p>DFS 最重要的就是设计回溯，所谓回溯就是还原现场，保证在执行另一分支的时候能够确保所有的改变只受当前状态的影响，所以在一条路走不通时就要修改。特殊的修改可以达到特殊的回溯效果，回溯时剪枝，回溯时调整路线，都是可以的。</p>
<p>DFS 是算法学习的基础工具，很重要，必须要学会。</p>
<hr>
<p>show: step version: 1.0 enable_checker: true</p>
<hr>
<h2 id="广度优先搜索">广度优先搜索</h2>
<p>BFS，其英文全称是 Breadth First Search，意为广度优先搜索，是所有的搜索手段之一。它是从某个状态开始，将所有节点加入一个先进先出的队列，然后一层一层进行状态转移，并且展开节点。</p>
<p>本章题目难度较大，请大家仔细研读讲解和代码。</p>
<h2 id="知识点-1">知识点</h2>
<p>1.BFS 算法设计原理与实现方法 2.经典题型精讲</p>
<h2 id="广度优先搜索基本概念">广度优先搜索基本概念</h2>
<p>作为搜索算法的一种，BFS 相较于 DFS 而言，BFS 是一层一层展开的，那么对于有多个终态时，最先找到的一定是最短的。</p>
<h2 id="广度优先搜索算法的设计步骤">广度优先搜索算法的设计步骤</h2>
<p>按照定义设计：</p>
<ol>
<li>
<p>确定该题目的状态（包括边界）</p>
</li>
<li>
<p>找到状态转移方式</p>
</li>
<li>
<p>找到问题的出口，计数或者某个状态</p>
</li>
<li>
<p>设计搜索</p>
</li>
</ol>
<p>会发现我们前期要找到的参数基本一致，所以在一般情况下 BFS 和 DFS 可以相互转换。</p>
<p>伪代码：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">check</span>(<span style="color:#a61717;background-color:#e3d2d2">参数</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span>(<span style="color:#a61717;background-color:#e3d2d2">满足条件</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">bool</span> <span style="color:#900;font-weight:bold">pd</span>(<span style="color:#a61717;background-color:#e3d2d2">参数</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#a61717;background-color:#e3d2d2">相应操作</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">bfs</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#099">1.</span> <span style="color:#a61717;background-color:#e3d2d2">把根节点放入队列尾端</span>
</span></span><span style="display:flex;"><span>    <span style="color:#099">2.</span> <span style="color:#a61717;background-color:#e3d2d2">每次从队列中取出一个节点</span>
</span></span><span style="display:flex;"><span>    <span style="color:#099">3.</span> Check <span style="color:#a61717;background-color:#e3d2d2">判断是不是答案，如果是结束算法</span> <span style="color:#000;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#099">4.</span> <span style="color:#a61717;background-color:#e3d2d2">把当前取出的节点扩展，如果扩展后的节点经</span>Pd()<span style="color:#a61717;background-color:#e3d2d2">后符合要求，就放入队列，不符合就不放。</span>
</span></span><span style="display:flex;"><span>    <span style="color:#099">5.</span> <span style="color:#a61717;background-color:#e3d2d2">转到步骤</span><span style="color:#099">2</span><span style="color:#a61717;background-color:#e3d2d2">，循环执行</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">如果所有节点被扩展完了，没有找到答案就无解。</span>
</span></span></code></pre></div><h3 id="长草">长草</h3>
<p><a href="https://www.lanqiao.cn/problems/149/learning/">题目链接</a></p>
<p>难度: 简单</p>
<p>标签: 模拟, BFS, 2020, 省模拟赛</p>
<p><strong>题目描述:</strong></p>
<p>小明有一块空地，他将这块空地划分为 $n$ 行 $m$ 列的小块，每行和每列的长度都为 1。</p>
<p>小明选了其中的一些小块空地，种上了草，其他小块仍然保持是空地。</p>
<p>这些草长得很快，每个月，草都会向外长出一些，如果一个小块种了草，则它将向自己的上、下、左、右四小块空地扩展，</p>
<p>这四小块空地都将变为有草的小块。请告诉小明，$k$ 个月后空地上哪些地方有草。</p>
<p><strong>输入描述:</strong></p>
<p>输入的第一行包含两个整数 $n, m$。</p>
<p>接下来 $n$ 行，每行包含 $m$ 个字母，表示初始的空地状态，字母之间没有空格。如果为小数点，表示为空地，如果字母为 $g$，表示种了草。</p>
<p>接下来包含一个整数 $k$。 其中，$2   \leq   n, m   \leq   1000，1   \leq   k   \leq   1000$。</p>
<p><strong>输出描述:</strong></p>
<p>输出 $n$ 行，每行包含 $m$ 个字母，表示 $k$ 个月后空地的状态。如果为小数点，表示为空地，如果字母为 $g$，表示长了草。</p>
<p><strong>输入输出样例:</strong></p>
<p><strong>示例:</strong></p>
<p><strong>输入:</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>4 5
</span></span><span style="display:flex;"><span>.g...
</span></span><span style="display:flex;"><span>.....
</span></span><span style="display:flex;"><span>..g..
</span></span><span style="display:flex;"><span>.....
</span></span><span style="display:flex;"><span>2
</span></span></code></pre></div><p><strong>输出:</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>gggg.
</span></span><span style="display:flex;"><span>gggg.
</span></span><span style="display:flex;"><span>ggggg
</span></span><span style="display:flex;"><span>.ggg.
</span></span></code></pre></div><p><strong>运行限制:</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>最大运行时间：1s 最大运行内存: 256M
</span></span></code></pre></div><p><strong>解题思路:</strong></p>
<p>这个题目简直就是为了广度优先搜索设置模板题，由于这个题目时输出广度优先搜索 <code>K</code> 次扩展后的终态，那我们就不用设置 <code>Check</code> 函数。</p>
<p>这里用一个 $N\times M$ 的矩阵来表示草地。</p>
<ol>
<li>
<p>算法开始：</p>
<p>将字母为 <code>g</code> 的草地的位置加入队列，然后向下执行</p>
</li>
<li>
<p>判断边界：</p>
<p>判断是否已经长了草，判断是否超出边界范围</p>
</li>
<li>
<p>搜索过程：</p>
<p>不断从队列取出一个节点，进行上下左右的扩展，执行 <code>2</code> 判断边界，符合就放入队列，不符合就跳过。</p>
<p>执行 K 次扩展，输出草地状态。</p>
</li>
<li>
<p>check(参数)：</p>
<p>这里不需要进行 <code>Check</code></p>
</li>
</ol>
<p>C++ 语言描述:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#include</span> <span style="color:#999;font-weight:bold;font-style:italic">&lt;bits/stdc++.h&gt;</span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic"></span><span style="color:#000;font-weight:bold">using</span> <span style="color:#000;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">const</span> <span style="color:#458;font-weight:bold">int</span> M <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">1005</span>;
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">struct</span> <span style="color:#458;font-weight:bold">PII</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">int</span> first;
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">int</span> second;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// C++ 有个数据类型叫 pair 上面的就可以定义为 pair&lt;int,int&gt; 用起来比较方便。
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>PII tempPair;<span style="color:#998;font-style:italic">//临时结点
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#458;font-weight:bold">char</span> Map[M][M];
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//---------图的路径搜索常用方向移动表示-------
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#458;font-weight:bold">int</span> dx[<span style="color:#099">4</span>]<span style="color:#000;font-weight:bold">=</span> {<span style="color:#099">0</span>,<span style="color:#099">1</span>,<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>,<span style="color:#099">0</span>};
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> dy[<span style="color:#099">4</span>]<span style="color:#000;font-weight:bold">=</span> {<span style="color:#099">1</span>,<span style="color:#099">0</span>,<span style="color:#099">0</span>,<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>};
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// 两两组合形成上下左右四个方向
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//      1------------------&gt; x
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//      |
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//      |
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//      |
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//      |
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//      |
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//      |
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//      |
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//      ↓
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//      y
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// dx[0]=0 dy[0]=1 那么代表向下的方向
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// dx[1]=1 dy[1]=0 那么代表向右的方向
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// dx[2]=-1 dy[0]=0 那么代表向左的方向
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">// dx[3]=0 dy[1]=-1 那么代表向上的方向
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> n;<span style="color:#998;font-style:italic">// n 行
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#458;font-weight:bold">int</span> m;<span style="color:#998;font-style:italic">// m 列
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#458;font-weight:bold">int</span> k;<span style="color:#998;font-style:italic">// k 次
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span>queue<span style="color:#000;font-weight:bold">&lt;</span>PII <span style="color:#000;font-weight:bold">&gt;</span> q; <span style="color:#998;font-style:italic">//广度优先搜索所用的队列
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> len;<span style="color:#998;font-style:italic">//记录节点数量方便后续k的计算
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#458;font-weight:bold">bool</span> <span style="color:#900;font-weight:bold">pd</span>(<span style="color:#458;font-weight:bold">int</span> x, <span style="color:#458;font-weight:bold">int</span> y)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span>(x<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">1</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">// /x 轴坐标 左侧越界
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">if</span>(x<span style="color:#000;font-weight:bold">&gt;</span>n)
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//x 轴坐标 右侧越界
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">else</span>  <span style="color:#000;font-weight:bold">if</span>(y<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">1</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//y 轴坐标 上侧越界
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">if</span>(y<span style="color:#000;font-weight:bold">&gt;</span>m)
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//y 轴坐标 下侧越界
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">if</span>(Map[x][y]<span style="color:#000;font-weight:bold">==</span><span style="color:#d14">&#39;g&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//已经长草了
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">// 在范围内，且没长草
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">BFS</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//BFS
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">while</span>(<span style="color:#000;font-weight:bold">!</span>q.empty()<span style="color:#000;font-weight:bold">&amp;&amp;</span>k<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#099">0</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        tempPair <span style="color:#000;font-weight:bold">=</span> q.front();
</span></span><span style="display:flex;"><span>        q.pop();
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//这两步是取出队首的节点
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#458;font-weight:bold">int</span> x <span style="color:#000;font-weight:bold">=</span> tempPair.first;<span style="color:#998;font-style:italic">//横坐标
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        <span style="color:#458;font-weight:bold">int</span> y <span style="color:#000;font-weight:bold">=</span> tempPair.second;<span style="color:#998;font-style:italic">//纵坐标
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span> i<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>; i<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">4</span>; i<span style="color:#000;font-weight:bold">++</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#458;font-weight:bold">int</span> nowx <span style="color:#000;font-weight:bold">=</span> x<span style="color:#000;font-weight:bold">+</span>dx[i]; <span style="color:#998;font-style:italic">//扩展后的横坐标
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            <span style="color:#458;font-weight:bold">int</span> nowy <span style="color:#000;font-weight:bold">=</span> y<span style="color:#000;font-weight:bold">+</span>dy[i]; <span style="color:#998;font-style:italic">//扩展后的纵坐标
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">if</span>(pd(nowx,nowy))
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                q.push({nowx,nowy});
</span></span><span style="display:flex;"><span>                Map[nowx][nowy]<span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#39;g&#39;</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//符合要求执行扩展，不符合要求，忽略即可。
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        len<span style="color:#000;font-weight:bold">--</span>; <span style="color:#998;font-style:italic">//没取出一个节点len  -1
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        <span style="color:#000;font-weight:bold">if</span>(len<span style="color:#000;font-weight:bold">==</span><span style="color:#099">0</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//当len =0 时，代表当前层扩展完了，那么就代表第一个月扩展完了
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            k<span style="color:#000;font-weight:bold">--</span>; <span style="color:#998;font-style:italic">// 所以k--
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            len <span style="color:#000;font-weight:bold">=</span> q.size(); <span style="color:#998;font-style:italic">// 当前层扩展完了，那就该扩展下一层了，所以len又被赋值为下一层的节点数目的值
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    cin<span style="color:#000;font-weight:bold">&gt;&gt;</span>n<span style="color:#000;font-weight:bold">&gt;&gt;</span>m;
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span> i<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>; i<span style="color:#000;font-weight:bold">&lt;=</span>n; i<span style="color:#000;font-weight:bold">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span> j<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>; j<span style="color:#000;font-weight:bold">&lt;=</span>m; j<span style="color:#000;font-weight:bold">++</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            cin<span style="color:#000;font-weight:bold">&gt;&gt;</span>Map[i][j];
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">if</span>(Map[i][j]<span style="color:#000;font-weight:bold">==</span><span style="color:#d14">&#39;g&#39;</span>)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                tempPair.first<span style="color:#000;font-weight:bold">=</span>i;
</span></span><span style="display:flex;"><span>                tempPair.second<span style="color:#000;font-weight:bold">=</span>j;
</span></span><span style="display:flex;"><span>               <span style="color:#998;font-style:italic">// cout&lt;&lt;i&lt;&lt;&#34;&#34;&lt;&lt;j&lt;&lt;endl;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>                q.push(tempPair);<span style="color:#998;font-style:italic">//将初始有树的结点加入队列
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    len <span style="color:#000;font-weight:bold">=</span> q.size();<span style="color:#998;font-style:italic">//记录第一层的节点数量方便后续k的计算
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    cin<span style="color:#000;font-weight:bold">&gt;&gt;</span>k;
</span></span><span style="display:flex;"><span>    BFS();
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span> i<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>; i<span style="color:#000;font-weight:bold">&lt;=</span>n; i<span style="color:#000;font-weight:bold">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span> j<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>; j<span style="color:#000;font-weight:bold">&lt;=</span>m; j<span style="color:#000;font-weight:bold">++</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            cout<span style="color:#000;font-weight:bold">&lt;&lt;</span>Map[i][j];
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        cout<span style="color:#000;font-weight:bold">&lt;&lt;</span>endl;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Python 语言描述:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># 请在此输入您的代码</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">from</span> <span style="color:#555">queue</span> <span style="color:#000;font-weight:bold">import</span> Queue
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>dx <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">0</span>, <span style="color:#099">1</span>, <span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>, <span style="color:#099">0</span>]
</span></span><span style="display:flex;"><span>dy <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">1</span>, <span style="color:#099">0</span>, <span style="color:#099">0</span>, <span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># 两两组合形成上下左右四个方向</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      1------------------&gt; x</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      |</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      |</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      |</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      |</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      |</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      |</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      |</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      ↓</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      y</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># dx[0]=0 dy[0]=1 那么代表向下的方向</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># dx[1]=1 dy[1]=0 那么代表向右的方向</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># dx[2]=-1 dy[0]=0 那么代表向左的方向</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># dx[3]=0 dy[1]=-1 那么代表向上的方向</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Map <span style="color:#000;font-weight:bold">=</span> []
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>q <span style="color:#000;font-weight:bold">=</span> Queue()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>m <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>k <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>length <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">def</span> <span style="color:#900;font-weight:bold">pd</span>(x, y):
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">global</span> n, m, Map
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> x <span style="color:#000;font-weight:bold">&lt;</span> <span style="color:#099">0</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># x 轴坐标左侧越界</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">elif</span> x <span style="color:#000;font-weight:bold">&gt;=</span> n:
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># x 轴坐标右侧越界</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">elif</span> y <span style="color:#000;font-weight:bold">&lt;</span> <span style="color:#099">0</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># y轴坐标上侧越界</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">elif</span> y <span style="color:#000;font-weight:bold">&gt;=</span> m:
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># y 轴坐标下侧越界</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">elif</span> Map[x][y] <span style="color:#000;font-weight:bold">==</span> <span style="color:#d14">&#39;g&#39;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># 已经长草了</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">else</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">True</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># 在范围内，且没长草</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">def</span> <span style="color:#900;font-weight:bold">BFS</span>():
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">global</span> k, q, n, m, Map, length
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">while</span> k <span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#099">0</span> <span style="color:#000;font-weight:bold">&amp;</span> (<span style="color:#000;font-weight:bold">not</span> q<span style="color:#000;font-weight:bold">.</span>empty()):
</span></span><span style="display:flex;"><span>        tempPair <span style="color:#000;font-weight:bold">=</span> q<span style="color:#000;font-weight:bold">.</span>get()
</span></span><span style="display:flex;"><span>        x <span style="color:#000;font-weight:bold">=</span> tempPair[<span style="color:#099">0</span>]  <span style="color:#998;font-style:italic"># 横坐标</span>
</span></span><span style="display:flex;"><span>        y <span style="color:#000;font-weight:bold">=</span> tempPair[<span style="color:#099">1</span>]  <span style="color:#998;font-style:italic"># 纵坐标</span>
</span></span><span style="display:flex;"><span>        nowx<span style="color:#000;font-weight:bold">=</span>x<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span> (pd(nowx, y)):
</span></span><span style="display:flex;"><span>            q<span style="color:#000;font-weight:bold">.</span>put((nowx, y))
</span></span><span style="display:flex;"><span>            Map[nowx][y] <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#39;g&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        nowx<span style="color:#000;font-weight:bold">=</span>x<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span> (pd(nowx, y)):
</span></span><span style="display:flex;"><span>            q<span style="color:#000;font-weight:bold">.</span>put((nowx, y))
</span></span><span style="display:flex;"><span>            Map[nowx][y] <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#39;g&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        nowy<span style="color:#000;font-weight:bold">=</span>y<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span> (pd(x, nowy)):
</span></span><span style="display:flex;"><span>            q<span style="color:#000;font-weight:bold">.</span>put((nowx, nowy))
</span></span><span style="display:flex;"><span>            Map[x][nowy] <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#39;g&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        nowy<span style="color:#000;font-weight:bold">=</span>y<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span> (pd(x, nowy)):
</span></span><span style="display:flex;"><span>            q<span style="color:#000;font-weight:bold">.</span>put((nowx, nowy))
</span></span><span style="display:flex;"><span>            Map[x][nowy] <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#39;g&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        length <span style="color:#000;font-weight:bold">-=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span> length <span style="color:#000;font-weight:bold">==</span> <span style="color:#099">0</span>:
</span></span><span style="display:flex;"><span>            k <span style="color:#000;font-weight:bold">-=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>            length <span style="color:#000;font-weight:bold">=</span> q<span style="color:#000;font-weight:bold">.</span>qsize()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">if</span> __name__ <span style="color:#000;font-weight:bold">==</span> <span style="color:#d14">&#39;__main__&#39;</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    n, m <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">map</span>(<span style="color:#0086b3">int</span>, <span style="color:#0086b3">input</span>()<span style="color:#000;font-weight:bold">.</span>split())
</span></span><span style="display:flex;"><span>    Map <span style="color:#000;font-weight:bold">=</span> [[<span style="color:#099">0</span> <span style="color:#000;font-weight:bold">for</span> _ <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(m)] <span style="color:#000;font-weight:bold">for</span> _ <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(n)]  <span style="color:#998;font-style:italic"># Python 动态开数组会减少运行时间</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(n):
</span></span><span style="display:flex;"><span>        input_ <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">input</span>()
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> j <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(m):
</span></span><span style="display:flex;"><span>            Map[i][j] <span style="color:#000;font-weight:bold">=</span> input_[j]
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">if</span> Map[i][j] <span style="color:#000;font-weight:bold">==</span> <span style="color:#d14">&#39;g&#39;</span>:
</span></span><span style="display:flex;"><span>                q<span style="color:#000;font-weight:bold">.</span>put((i, j))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    k <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">int</span>(<span style="color:#0086b3">input</span>())
</span></span><span style="display:flex;"><span>    length <span style="color:#000;font-weight:bold">=</span> q<span style="color:#000;font-weight:bold">.</span>qsize()
</span></span><span style="display:flex;"><span>    BFS()
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(n):
</span></span><span style="display:flex;"><span>        str_temp <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> j <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(m):
</span></span><span style="display:flex;"><span>            str_temp <span style="color:#000;font-weight:bold">+=</span> Map[i][j]
</span></span><span style="display:flex;"><span>        <span style="color:#0086b3">print</span>(str_temp)
</span></span></code></pre></div><p><strong>重点:</strong></p>
<p>Python 的 Queue 非常耗费时间，强烈建议大家使用 list 进行模拟</p>
<p>下面是用 List 模拟，使用 Queue 耗时 3000 ms , 使用 list 模拟仅消耗 54 ms 所以大家使用 Python 编写代码的时候还是使用 List 尽量避免 Queue 的使用。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># 请在此输入您的代码</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">from</span> <span style="color:#555">queue</span> <span style="color:#000;font-weight:bold">import</span> Queue
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>dx <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">0</span>, <span style="color:#099">1</span>, <span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>, <span style="color:#099">0</span>]
</span></span><span style="display:flex;"><span>dy <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">1</span>, <span style="color:#099">0</span>, <span style="color:#099">0</span>, <span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># 两两组合形成上下左右四个方向</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      1------------------&gt; x</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      |</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      |</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      |</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      |</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      |</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      |</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      |</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      ↓</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">#      y</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># dx[0]=0 dy[0]=1 那么代表向下的方向</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># dx[1]=1 dy[1]=0 那么代表向右的方向</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># dx[2]=-1 dy[0]=0 那么代表向左的方向</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># dx[3]=0 dy[1]=-1 那么代表向上的方向</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Map <span style="color:#000;font-weight:bold">=</span> []
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>q <span style="color:#000;font-weight:bold">=</span> []
</span></span><span style="display:flex;"><span>qfront <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>qend <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>m <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>k <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>length <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">def</span> <span style="color:#900;font-weight:bold">pd</span>(x, y):
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> x <span style="color:#000;font-weight:bold">&lt;</span> <span style="color:#099">0</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># x 轴坐标左侧越界</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">elif</span> x <span style="color:#000;font-weight:bold">&gt;=</span> n:
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># x 轴坐标右侧越界</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">elif</span> y <span style="color:#000;font-weight:bold">&lt;</span> <span style="color:#099">0</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># y轴坐标上侧越界</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">elif</span> y <span style="color:#000;font-weight:bold">&gt;=</span> m:
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># y 轴坐标下侧越界</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">elif</span> Map[x][y] <span style="color:#000;font-weight:bold">==</span> <span style="color:#d14">&#39;g&#39;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># 已经长草了</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">else</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">True</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># 在范围内，且没长草</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">def</span> <span style="color:#900;font-weight:bold">BFS</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">global</span> k, q, n, m, Map, length, qend, qfront
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># print(&#34;K Length&#34;, k, length)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">while</span> k <span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#099">0</span> <span style="color:#000;font-weight:bold">and</span> length <span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#099">0</span>:
</span></span><span style="display:flex;"><span>        tempPair <span style="color:#000;font-weight:bold">=</span> q[qfront]
</span></span><span style="display:flex;"><span>        qfront <span style="color:#000;font-weight:bold">+=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>        x <span style="color:#000;font-weight:bold">=</span> tempPair[<span style="color:#099">0</span>]  <span style="color:#998;font-style:italic"># 横坐标</span>
</span></span><span style="display:flex;"><span>        y <span style="color:#000;font-weight:bold">=</span> tempPair[<span style="color:#099">1</span>]  <span style="color:#998;font-style:italic"># 纵坐标</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(<span style="color:#099">4</span>):
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            nowx <span style="color:#000;font-weight:bold">=</span> x <span style="color:#000;font-weight:bold">+</span> dx[i]  <span style="color:#998;font-style:italic"># 扩展后的横坐标</span>
</span></span><span style="display:flex;"><span>            nowy <span style="color:#000;font-weight:bold">=</span> y <span style="color:#000;font-weight:bold">+</span> dy[i]  <span style="color:#998;font-style:italic"># 扩展后的纵坐标</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">if</span> (pd(nowx, nowy)):
</span></span><span style="display:flex;"><span>                q<span style="color:#000;font-weight:bold">.</span>append((nowx,nowy))
</span></span><span style="display:flex;"><span>                qend <span style="color:#000;font-weight:bold">+=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>                Map[nowx][nowy] <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#39;g&#39;</span>
</span></span><span style="display:flex;"><span>        length <span style="color:#000;font-weight:bold">-=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span> length <span style="color:#000;font-weight:bold">==</span> <span style="color:#099">0</span>:
</span></span><span style="display:flex;"><span>            k <span style="color:#000;font-weight:bold">-=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>            length <span style="color:#000;font-weight:bold">=</span> qend <span style="color:#000;font-weight:bold">-</span> qfront
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">if</span> __name__ <span style="color:#000;font-weight:bold">==</span> <span style="color:#d14">&#39;__main__&#39;</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    n, m <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">map</span>(<span style="color:#0086b3">int</span>, <span style="color:#0086b3">input</span>()<span style="color:#000;font-weight:bold">.</span>split())
</span></span><span style="display:flex;"><span>    Map <span style="color:#000;font-weight:bold">=</span> [[<span style="color:#099">0</span> <span style="color:#000;font-weight:bold">for</span> _ <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(m)] <span style="color:#000;font-weight:bold">for</span> _ <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(n)]  <span style="color:#998;font-style:italic"># Python 动态开数组会减少运行时间</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(n):
</span></span><span style="display:flex;"><span>        input_ <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">input</span>()
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> j <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(m):
</span></span><span style="display:flex;"><span>            Map[i][j] <span style="color:#000;font-weight:bold">=</span> input_[j]
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">if</span> Map[i][j] <span style="color:#000;font-weight:bold">==</span> <span style="color:#d14">&#39;g&#39;</span>:
</span></span><span style="display:flex;"><span>                q<span style="color:#000;font-weight:bold">.</span>append((i,j))
</span></span><span style="display:flex;"><span>                qend <span style="color:#000;font-weight:bold">+=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    k <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">int</span>(<span style="color:#0086b3">input</span>())
</span></span><span style="display:flex;"><span>    length <span style="color:#000;font-weight:bold">=</span> qend <span style="color:#000;font-weight:bold">-</span> qfront
</span></span><span style="display:flex;"><span>    BFS()
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(n):
</span></span><span style="display:flex;"><span>        str_temp <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> j <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(m):
</span></span><span style="display:flex;"><span>            str_temp <span style="color:#000;font-weight:bold">+=</span> Map[i][j]
</span></span><span style="display:flex;"><span>        <span style="color:#0086b3">print</span>(str_temp)
</span></span></code></pre></div><p>Java 语言描述:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#555">java.util.*</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#555">java.util.concurrent.LinkedBlockingQueue</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">import static</span><span style="color:#bbb"> </span><span style="color:#555">java.lang.Math.abs</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Main</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">final</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>M<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>1005;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">PII</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>first;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>second;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>};<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span>String<span style="color:#bbb"> </span>Map<span style="color:#000;font-weight:bold">[]=</span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>String<span style="color:#000;font-weight:bold">[</span>M<span style="color:#000;font-weight:bold">]</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//---------图的路径搜索常用方向移动表示-------</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>dx<span style="color:#000;font-weight:bold">[]=</span><span style="color:#bbb"> </span>{0,1,<span style="color:#000;font-weight:bold">-</span>1,0};<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb">  </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>dy<span style="color:#000;font-weight:bold">[]=</span><span style="color:#bbb"> </span>{1,0,0,<span style="color:#000;font-weight:bold">-</span>1};<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// 两两组合形成上下左右四个方向</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//      1------------------&gt; x</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//      |</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//      |</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//      |</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//      |</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//      |</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//      |</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//      |</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//      ↓</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//      y</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// dx[0]=0 dy[0]=1 那么代表向下的方向</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// dx[1]=1 dy[1]=0 那么代表向右的方向</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// dx[2]=-1 dy[0]=0 那么代表向左的方向</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// dx[3]=0 dy[1]=-1 那么代表向上的方向</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>n;<span style="color:#998;font-style:italic">// n 行</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>m;<span style="color:#998;font-style:italic">// m 列</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>k;<span style="color:#998;font-style:italic">// k 次</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span>Queue<span style="color:#000;font-weight:bold">&lt;</span>PII<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>q<span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>LinkedBlockingQueue<span style="color:#000;font-weight:bold">&lt;&gt;</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic">//广度优先搜索所用的队列</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>len;<span style="color:#998;font-style:italic">//记录节点数量方便后续k的计算</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">boolean</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">pd</span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>x,<span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>y)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">if</span>(x<span style="color:#000;font-weight:bold">&lt;</span>1)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic">// /x 轴坐标 左侧越界</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">if</span>(x<span style="color:#000;font-weight:bold">&gt;</span>n)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic">//x 轴坐标 右侧越界</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">else</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">if</span>(y<span style="color:#000;font-weight:bold">&lt;</span>1)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic">//y 轴坐标 上侧越界</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">if</span>(y<span style="color:#000;font-weight:bold">&gt;</span>m)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic">//y 轴坐标 下侧越界</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">if</span>(Map<span style="color:#000;font-weight:bold">[</span>x<span style="color:#000;font-weight:bold">]</span>.<span style="color:#008080">charAt</span>(y)<span style="color:#000;font-weight:bold">==</span><span style="color:#d14">&#39;g&#39;</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic">//已经长草了</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic">// 在范围内，且没长草</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">BFS</span>()<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic">//BFS</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">while</span>(q.<span style="color:#008080">size</span>()<span style="color:#000;font-weight:bold">!=</span>0<span style="color:#000;font-weight:bold">&amp;&amp;</span>k<span style="color:#000;font-weight:bold">&gt;</span>0)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>PII<span style="color:#bbb"> </span>tempPair<span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>q.<span style="color:#008080">peek</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>q.<span style="color:#008080">poll</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic">//这两步是取出队首的节点</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//            System.out.println(q.size());</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>x<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>tempPair.<span style="color:#008080">first</span>;<span style="color:#998;font-style:italic">//横坐标</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>y<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>tempPair.<span style="color:#008080">second</span>;<span style="color:#998;font-style:italic">//纵坐标</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">=</span>0;<span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">&lt;</span>4;<span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">++</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>nowx<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>x<span style="color:#000;font-weight:bold">+</span>dx<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]</span>;<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">//扩展后的横坐标</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>nowy<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>y<span style="color:#000;font-weight:bold">+</span>dy<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]</span>;<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">//扩展后的纵坐标</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">if</span>(pd(nowx,nowy))<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>PII<span style="color:#bbb"> </span>tempPair2<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>PII();<span style="color:#998;font-style:italic">//临时结点</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>tempPair2.<span style="color:#008080">first</span><span style="color:#000;font-weight:bold">=</span>nowx;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>tempPair2.<span style="color:#008080">second</span><span style="color:#000;font-weight:bold">=</span>nowy;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>q.<span style="color:#008080">add</span>(tempPair2);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>StringBuilder<span style="color:#bbb"> </span>strBuilder<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>StringBuilder(Map<span style="color:#000;font-weight:bold">[</span>nowx<span style="color:#000;font-weight:bold">]</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>strBuilder.<span style="color:#008080">setCharAt</span>(nowy,<span style="color:#bbb"> </span><span style="color:#d14">&#39;g&#39;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>Map<span style="color:#000;font-weight:bold">[</span>nowx<span style="color:#000;font-weight:bold">]=</span>strBuilder.<span style="color:#008080">toString</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#998;font-style:italic">//符合要求执行扩展，不符合要求，忽略即可。</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>len<span style="color:#000;font-weight:bold">--</span>;<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">//没取出一个节点len  -1</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">if</span>(len<span style="color:#000;font-weight:bold">==</span>0)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#998;font-style:italic">//当len =0 时，代表当前层扩展完了，那么就代表第一个月扩展完了</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>k<span style="color:#000;font-weight:bold">--</span>;<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// 所以k--</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>len<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>q.<span style="color:#008080">size</span>();<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">// 当前层扩展完了，那就该扩展下一层了，所以len又被赋值为下一层的节点数目的值</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">main</span>(String<span style="color:#000;font-weight:bold">[]</span><span style="color:#bbb"> </span>args)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>Scanner<span style="color:#bbb"> </span>in<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Scanner(System.<span style="color:#008080">in</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>n<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>in.<span style="color:#008080">nextInt</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>m<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>in.<span style="color:#008080">nextInt</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">=</span>1;<span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">&lt;=</span>n;<span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">++</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>Map<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]=</span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>String(<span style="color:#d14">&#34; &#34;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span>in.<span style="color:#008080">next</span>());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>j<span style="color:#000;font-weight:bold">=</span>1;<span style="color:#bbb"> </span>j<span style="color:#000;font-weight:bold">&lt;=</span>m;<span style="color:#bbb"> </span>j<span style="color:#000;font-weight:bold">++</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#458;font-weight:bold">char</span><span style="color:#bbb"> </span>temChar<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>Map<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]</span>.<span style="color:#008080">charAt</span>(j);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">if</span>(temChar<span style="color:#000;font-weight:bold">==</span><span style="color:#d14">&#39;g&#39;</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>PII<span style="color:#bbb"> </span>tempPair<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>PII();<span style="color:#998;font-style:italic">//临时结点</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>tempPair.<span style="color:#008080">first</span><span style="color:#000;font-weight:bold">=</span>i;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>tempPair.<span style="color:#008080">second</span><span style="color:#000;font-weight:bold">=</span>j;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>q.<span style="color:#008080">offer</span>(tempPair);<span style="color:#998;font-style:italic">//将初始有草的结点加入队列</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>len<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>q.<span style="color:#008080">size</span>();<span style="color:#998;font-style:italic">//记录第一层的节点数量方便后续k的计算</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>k<span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>in.<span style="color:#008080">nextInt</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>BFS();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">=</span>1;<span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">&lt;=</span>n;<span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">++</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(Map<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><h3 id="走迷宫">走迷宫</h3>
<p><a href="https://www.lanqiao.cn/problems/1216/learning/">题目链接</a></p>
<p>难度: 简单</p>
<p>标签: BFS</p>
<p><strong>题目描述:</strong></p>
<p>给定一个 $N\times M$ 的网格迷宫 $G$。$G$ 的每个格子要么是道路，要么是障碍物（道路用 $1$ 表示，障碍物用 $0$ 表示）。</p>
<p>已知迷宫的入口位置为 $(x_1,y_1)$，出口位置为 $(x_2 , y_2)$。问从入口走到出口，最少要走多少个格子。</p>
<p><strong>输入:</strong></p>
<p>输入第 $1$ 行包含两个正整数 $N,M$，分别表示迷宫的大小。</p>
<p>接下来输入一个 $N\times M$ 的矩阵。若 $G_{i,j}=1$ 表示其为道路，否则表示其为障碍物。</p>
<p>最后一行输入四个整数 $x_1,y_1,x_2,y_2$，表示入口的位置和出口的位置。</p>
<p>$1\leq N,M\leq10^2$，$0\leq G_{i,j}\leq 1$，$1\leq x_1,x_2\leq N$，$1\leq y_1,y_2\leq M$。</p>
<p><strong>输出：</strong></p>
<p>输出仅一行，包含一个整数表示答案。</p>
<p>若无法从入口到出口，则输出 $-1$。</p>
<p><strong>输入输出样例：</strong></p>
<p>输入</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>5 5
</span></span><span style="display:flex;"><span>1 0 1 1 0
</span></span><span style="display:flex;"><span>1 1 0 1 1
</span></span><span style="display:flex;"><span>0 1 0 1 1
</span></span><span style="display:flex;"><span>1 1 1 1 1
</span></span><span style="display:flex;"><span>1 0 0 0 1
</span></span><span style="display:flex;"><span>1 1 5 5
</span></span></code></pre></div><p>输出</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>8
</span></span></code></pre></div><p><strong>运行限制:</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>最大运行时间：1s 最大运行内存: 128M
</span></span></code></pre></div><p><strong>解题思路:</strong></p>
<ol>
<li>
<p><strong>算法开始：</strong></p>
<p>我们以起点开始做 BFS ，将入口压入栈开始执行 BFS 算法</p>
</li>
<li>
<p><strong>判断边界：</strong></p>
<p>在当前行，当前列的位置上判断是否满足条件，若不满足，跳到第 5 步，即不符合边界条件。 判断条件如下：</p>
<ol>
<li>
<p>$vis[x][y]$ &gt;= 1 标记数组已经被标记，已被走过，不能再走，超出边界</p>
</li>
<li>
<p>$x &lt; 1$ 从左侧走出方格</p>
</li>
<li>
<p>$x &gt; n$ 从右侧走出方格</p>
</li>
<li>
<p>$y &lt; 1$ 从上侧走出方格</p>
</li>
<li>
<p>$y &gt; n$ 从下侧走出方格</p>
</li>
<li>
<p>$map[x][y]$ != 1 没有路不能走</p>
</li>
</ol>
</li>
<li>
<p><strong>搜索过程：</strong></p>
<p>调用 Check 函数。</p>
<p>如果边界条件满足，就继续调用搜索，找到下一步的位置</p>
<p>每次找到下一个位置的时候，令其 $Vis[nextx][nexty]$ = 当前 $Vis + 1$</p>
<p>这样既能用 $vis$ 数组标记又能使用 $vis$ 数组存步数，从 $1$ 开始，即开始节点是 $1$ ，所以最后要减去 $1$ 。</p>
</li>
<li>
<p><strong>check(参数)：</strong></p>
<p>如果当搜索到 $x = 终点 x$, $y = 终点 y$ 时，就找到了终点，此时他的 $Vis$ 数组就存储了他的步数，但是是从 $1$ 开始的。</p>
</li>
</ol>
<p>C++ 语言描述:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#include</span> <span style="color:#999;font-weight:bold;font-style:italic">&lt;bits/stdc++.h&gt;</span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic"></span><span style="color:#000;font-weight:bold">using</span> <span style="color:#000;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> vis[<span style="color:#099">150</span>][<span style="color:#099">150</span>]; <span style="color:#998;font-style:italic">//用于存储是否访问过，并且存储长度
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">char</span> G[<span style="color:#099">150</span>][<span style="color:#099">150</span>]; <span style="color:#998;font-style:italic">//用于存储题目给出的地图
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> n,m,ans<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> dx[<span style="color:#099">4</span>] <span style="color:#000;font-weight:bold">=</span> {<span style="color:#099">0</span>,<span style="color:#099">0</span>,<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>,<span style="color:#099">1</span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> dy[<span style="color:#099">4</span>] <span style="color:#000;font-weight:bold">=</span> {<span style="color:#099">1</span>,<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>,<span style="color:#099">0</span>,<span style="color:#099">0</span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//上下左右移动，不会的看前面的代码
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">struct</span> <span style="color:#458;font-weight:bold">node</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">int</span> x;
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">int</span> y;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>node Start,End;
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">bool</span> <span style="color:#900;font-weight:bold">pd</span>(<span style="color:#458;font-weight:bold">int</span> x,<span style="color:#458;font-weight:bold">int</span> y)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span>(x<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">1</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//从左侧走出方格
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">if</span>(x<span style="color:#000;font-weight:bold">&gt;</span>n)
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//从右侧走出方格
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">if</span>(y<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">1</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//从上侧走出方格
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">if</span>(y<span style="color:#000;font-weight:bold">&gt;</span>m)
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//从下侧走出方格
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">if</span>( vis[x][y]<span style="color:#000;font-weight:bold">!=</span><span style="color:#099">0</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//已经访问了
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">if</span>(G[x][y]<span style="color:#000;font-weight:bold">!=</span><span style="color:#d14">&#39;1&#39;</span>) <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//不是路不能走
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">bool</span>  <span style="color:#900;font-weight:bold">check</span>(<span style="color:#458;font-weight:bold">int</span> x, <span style="color:#458;font-weight:bold">int</span> y)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span>(x <span style="color:#000;font-weight:bold">==</span> End.x<span style="color:#000;font-weight:bold">&amp;&amp;</span> y <span style="color:#000;font-weight:bold">==</span> End.y)   <span style="color:#998;font-style:italic">//找到终点，把距离给他
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    {
</span></span><span style="display:flex;"><span>        ans  <span style="color:#000;font-weight:bold">=</span>  vis[x][ y];
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">else</span>    <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">bfs</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    queue<span style="color:#000;font-weight:bold">&lt;</span>node<span style="color:#000;font-weight:bold">&gt;</span>q;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    node now,next;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    q.push(Start);     <span style="color:#998;font-style:italic">//将起点压人队列中
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    vis[Start.x][Start.y] <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">1</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">while</span>(<span style="color:#000;font-weight:bold">!</span>q.empty())
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        now <span style="color:#000;font-weight:bold">=</span> q.front();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span>(check(now.x,now.y))
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">return</span> ;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        q.pop();     <span style="color:#998;font-style:italic">//将队列最前面的弹出。
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span> i<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>; i<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">4</span>; i<span style="color:#000;font-weight:bold">++</span>)  <span style="color:#998;font-style:italic">//四个方向
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#458;font-weight:bold">int</span> nextx <span style="color:#000;font-weight:bold">=</span> now.x <span style="color:#000;font-weight:bold">+</span> dx[i];
</span></span><span style="display:flex;"><span>            <span style="color:#458;font-weight:bold">int</span> nexty <span style="color:#000;font-weight:bold">=</span> now.y <span style="color:#000;font-weight:bold">+</span> dy[i];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">if</span>(pd(nextx,nexty))  <span style="color:#998;font-style:italic">//判断是否符合条件
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                next.x<span style="color:#000;font-weight:bold">=</span>nextx;
</span></span><span style="display:flex;"><span>                next.y<span style="color:#000;font-weight:bold">=</span>nexty;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                q.push(next);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                vis[nextx][nexty] <span style="color:#000;font-weight:bold">=</span> vis[now.x][now.y]<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>; <span style="color:#998;font-style:italic">//步数+1
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    cin<span style="color:#000;font-weight:bold">&gt;&gt;</span>n<span style="color:#000;font-weight:bold">&gt;&gt;</span>m;
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//memset(vis,0,sizeof(vis));
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span> i<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>; i<span style="color:#000;font-weight:bold">&lt;=</span>n; i<span style="color:#000;font-weight:bold">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span> j<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>; j<span style="color:#000;font-weight:bold">&lt;=</span>m; j<span style="color:#000;font-weight:bold">++</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            cin<span style="color:#000;font-weight:bold">&gt;&gt;</span>G[i][j];
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    cin<span style="color:#000;font-weight:bold">&gt;&gt;</span>Start.x<span style="color:#000;font-weight:bold">&gt;&gt;</span>Start.y<span style="color:#000;font-weight:bold">&gt;&gt;</span>End.x<span style="color:#000;font-weight:bold">&gt;&gt;</span>End.y;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    ans <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    bfs();
</span></span><span style="display:flex;"><span>    cout<span style="color:#000;font-weight:bold">&lt;&lt;</span>ans<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span><span style="color:#000;font-weight:bold">&lt;&lt;</span>endl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Python 语言描述:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>dx <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">0</span>, <span style="color:#099">1</span>, <span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>, <span style="color:#099">0</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>dy <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">1</span>, <span style="color:#099">0</span>, <span style="color:#099">0</span>, <span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>G <span style="color:#000;font-weight:bold">=</span> []
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Vis <span style="color:#000;font-weight:bold">=</span> []
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># --------队列模拟-----------</span>
</span></span><span style="display:flex;"><span>q <span style="color:#000;font-weight:bold">=</span> []                   <span style="color:#998;font-style:italic"># |</span>
</span></span><span style="display:flex;"><span>                         <span style="color:#998;font-style:italic"># |</span>
</span></span><span style="display:flex;"><span>qfront <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>               <span style="color:#998;font-style:italic"># |</span>
</span></span><span style="display:flex;"><span>                         <span style="color:#998;font-style:italic"># |</span>
</span></span><span style="display:flex;"><span>qend <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>                 <span style="color:#998;font-style:italic"># |</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># --------队列模拟-----------</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>m <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>ans <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>startX<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>startY<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>endX<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>endY<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">def</span> <span style="color:#900;font-weight:bold">pd</span>(x, y):
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> x <span style="color:#000;font-weight:bold">&lt;</span> <span style="color:#099">1</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># x 轴坐标左侧越界</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">elif</span> x <span style="color:#000;font-weight:bold">&gt;</span> n:
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># x 轴坐标右侧越界</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">elif</span> y <span style="color:#000;font-weight:bold">&lt;</span> <span style="color:#099">1</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># y轴坐标上侧越界</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">elif</span> y <span style="color:#000;font-weight:bold">&gt;</span> m:
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># y 轴坐标下侧越界</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">elif</span> Vis[x][y]<span style="color:#000;font-weight:bold">!=</span><span style="color:#099">0</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">#已经访问了</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">elif</span> G[x][y] <span style="color:#000;font-weight:bold">!=</span> <span style="color:#d14">&#39;1&#39;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># 已经访问了</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">else</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">True</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># 在范围内，且没长草</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">def</span> <span style="color:#900;font-weight:bold">check</span>( x,  y):
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">global</span> ans
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> x <span style="color:#000;font-weight:bold">==</span> endX <span style="color:#000;font-weight:bold">and</span> y <span style="color:#000;font-weight:bold">==</span> endY :  <span style="color:#998;font-style:italic">#找到终点，把距离给他</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        ans  <span style="color:#000;font-weight:bold">=</span>  Vis[x][y];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">True</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">else</span>   :
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">False</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">def</span> <span style="color:#900;font-weight:bold">BFS</span>():
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">global</span> qend ,qfront
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    q<span style="color:#000;font-weight:bold">.</span>append((startX,startY))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    qend<span style="color:#000;font-weight:bold">+=</span><span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Vis[startX][startY]<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">while</span> qend<span style="color:#000;font-weight:bold">-</span>qfront<span style="color:#000;font-weight:bold">!=</span><span style="color:#099">0</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        tempPair <span style="color:#000;font-weight:bold">=</span> q[qfront]
</span></span><span style="display:flex;"><span>        qfront<span style="color:#000;font-weight:bold">+=</span><span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        x <span style="color:#000;font-weight:bold">=</span> tempPair[<span style="color:#099">0</span>]  <span style="color:#998;font-style:italic"># 横坐标</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        y <span style="color:#000;font-weight:bold">=</span> tempPair[<span style="color:#099">1</span>]  <span style="color:#998;font-style:italic"># 纵坐标</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span> check(x,y):
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">return</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(<span style="color:#099">4</span>):
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            nowx <span style="color:#000;font-weight:bold">=</span> x <span style="color:#000;font-weight:bold">+</span> dx[i]  <span style="color:#998;font-style:italic"># 扩展后的横坐标</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            nowy <span style="color:#000;font-weight:bold">=</span> y <span style="color:#000;font-weight:bold">+</span> dy[i]  <span style="color:#998;font-style:italic"># 扩展后的纵坐标</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">if</span> (pd(nowx, nowy)):
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                q<span style="color:#000;font-weight:bold">.</span>append((nowx,nowy))
</span></span><span style="display:flex;"><span>                qend<span style="color:#000;font-weight:bold">+=</span><span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                Vis[nowx][nowy] <span style="color:#000;font-weight:bold">=</span> Vis[x][ y] <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">if</span> __name__ <span style="color:#000;font-weight:bold">==</span> <span style="color:#d14">&#39;__main__&#39;</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    n, m <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">map</span>(<span style="color:#0086b3">int</span>, <span style="color:#0086b3">input</span>()<span style="color:#000;font-weight:bold">.</span>split())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    G <span style="color:#000;font-weight:bold">=</span> [[<span style="color:#099">0</span> <span style="color:#000;font-weight:bold">for</span> _ <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(m<span style="color:#000;font-weight:bold">+</span><span style="color:#099">10</span>)] <span style="color:#000;font-weight:bold">for</span> _ <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(n<span style="color:#000;font-weight:bold">+</span><span style="color:#099">10</span>)]  <span style="color:#998;font-style:italic"># Python 动态开数组会减少运行时间</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Vis <span style="color:#000;font-weight:bold">=</span> [[<span style="color:#099">0</span> <span style="color:#000;font-weight:bold">for</span> _ <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(m<span style="color:#000;font-weight:bold">+</span><span style="color:#099">10</span>)] <span style="color:#000;font-weight:bold">for</span> _ <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(n<span style="color:#000;font-weight:bold">+</span><span style="color:#099">10</span>)]  <span style="color:#998;font-style:italic"># Python 动态开数组会减少运行时间</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(n):
</span></span><span style="display:flex;"><span>        input_ <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">input</span>()<span style="color:#000;font-weight:bold">.</span>split()
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> j <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(m):
</span></span><span style="display:flex;"><span>            G[i<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>][j<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">=</span> input_[j]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    startX ,startY , endX ,endY <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">map</span>(<span style="color:#0086b3">int</span>, <span style="color:#0086b3">input</span>()<span style="color:#000;font-weight:bold">.</span>split())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    BFS()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#0086b3">print</span>(ans<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>)
</span></span></code></pre></div><p>Java 语言描述:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#555">java.util.*</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#555">java.util.concurrent.LinkedBlockingQueue</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">import static</span><span style="color:#bbb"> </span><span style="color:#555">java.lang.Math.abs</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Main</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">final</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>M<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>1005;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">node</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>x;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>y;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">node</span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>x,<span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>y)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">this</span>.<span style="color:#008080">x</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>x;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">this</span>.<span style="color:#008080">y</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>y;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>n,<span style="color:#bbb"> </span>m,<span style="color:#bbb"> </span>ans<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>0;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>vis<span style="color:#000;font-weight:bold">[][]</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#000;font-weight:bold">[</span>150<span style="color:#000;font-weight:bold">][</span>150<span style="color:#000;font-weight:bold">]</span>;<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">//用于存储是否访问过，并且存储长度</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>G<span style="color:#000;font-weight:bold">[][]</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#000;font-weight:bold">[</span>150<span style="color:#000;font-weight:bold">][</span>150<span style="color:#000;font-weight:bold">]</span>;<span style="color:#bbb">  </span><span style="color:#998;font-style:italic">//用于存储题目给出的地图</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span>node<span style="color:#bbb"> </span>Start,<span style="color:#bbb"> </span>End;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//---------图的路径搜索常用方向移动表示-------</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>dx<span style="color:#000;font-weight:bold">[]</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>{0,<span style="color:#bbb"> </span>1,<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">-</span>1,<span style="color:#bbb"> </span>0};<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>dy<span style="color:#000;font-weight:bold">[]</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>{1,<span style="color:#bbb"> </span>0,<span style="color:#bbb"> </span>0,<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">-</span>1};<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span>Queue<span style="color:#000;font-weight:bold">&lt;</span>node<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>q<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>LinkedBlockingQueue<span style="color:#000;font-weight:bold">&lt;&gt;</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic">//广度优先搜索所用的队列</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">boolean</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">pd</span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>x,<span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>y)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>(x<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#bbb"> </span>1)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic">// /x 轴坐标 左侧越界</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>(x<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>n)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic">//x 轴坐标 右侧越界</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>(y<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#bbb"> </span>1)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic">//y 轴坐标 上侧越界</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>(y<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>m)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic">//y 轴坐标 下侧越界</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>(vis<span style="color:#000;font-weight:bold">[</span>x<span style="color:#000;font-weight:bold">][</span>y<span style="color:#000;font-weight:bold">]</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">!=</span><span style="color:#bbb"> </span>0)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic">//已经访问了</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>(G<span style="color:#000;font-weight:bold">[</span>x<span style="color:#000;font-weight:bold">][</span>y<span style="color:#000;font-weight:bold">]</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">!=</span><span style="color:#bbb"> </span>1)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic">//不能走</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic">// 在范围内，且没长草</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">boolean</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">check</span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>x,<span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>y)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>(x<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">==</span><span style="color:#bbb"> </span>End.<span style="color:#008080">x</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&amp;&amp;</span><span style="color:#bbb"> </span>y<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">==</span><span style="color:#bbb"> </span>End.<span style="color:#008080">y</span>)<span style="color:#bbb">   </span><span style="color:#998;font-style:italic">//找到终点，把距离给他</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>ans<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>vis<span style="color:#000;font-weight:bold">[</span>x<span style="color:#000;font-weight:bold">][</span>y<span style="color:#000;font-weight:bold">]</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">BFS</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>q.<span style="color:#008080">add</span>(Start);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>vis<span style="color:#000;font-weight:bold">[</span>Start.<span style="color:#008080">x</span><span style="color:#000;font-weight:bold">][</span>Start.<span style="color:#008080">y</span><span style="color:#000;font-weight:bold">]</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>1;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>node<span style="color:#bbb"> </span>now,<span style="color:#bbb"> </span>next;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">while</span><span style="color:#bbb"> </span>(q.<span style="color:#008080">size</span>()<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">!=</span><span style="color:#bbb"> </span>0)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>now<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>q.<span style="color:#008080">peek</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>(check(now.<span style="color:#008080">x</span>,<span style="color:#bbb"> </span>now.<span style="color:#008080">y</span>))<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">return</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>q.<span style="color:#008080">poll</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic">//这两步是取出队首的节点</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">for</span><span style="color:#bbb"> </span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>i<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>0;<span style="color:#bbb"> </span>i<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#bbb"> </span>4;<span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">++</span>)<span style="color:#bbb">  </span><span style="color:#998;font-style:italic">//四个方向</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>nextx<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>now.<span style="color:#008080">x</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>dx<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>nexty<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>now.<span style="color:#008080">y</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>dy<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>(pd(nextx,<span style="color:#bbb"> </span>nexty))<span style="color:#bbb">  </span><span style="color:#998;font-style:italic">//判断是否符合条件</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>next<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>node(nextx,<span style="color:#bbb"> </span>nexty);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>q.<span style="color:#008080">add</span>(next);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>vis<span style="color:#000;font-weight:bold">[</span>nextx<span style="color:#000;font-weight:bold">][</span>nexty<span style="color:#000;font-weight:bold">]</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>vis<span style="color:#000;font-weight:bold">[</span>now.<span style="color:#008080">x</span><span style="color:#000;font-weight:bold">][</span>now.<span style="color:#008080">y</span><span style="color:#000;font-weight:bold">]</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>1;<span style="color:#bbb"> </span><span style="color:#998;font-style:italic">//步数+1</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">main</span>(String<span style="color:#000;font-weight:bold">[]</span><span style="color:#bbb"> </span>args)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>Scanner<span style="color:#bbb"> </span>in<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Scanner(System.<span style="color:#008080">in</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>n<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>in.<span style="color:#008080">nextInt</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>m<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>in.<span style="color:#008080">nextInt</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">for</span><span style="color:#bbb"> </span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>i<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>1;<span style="color:#bbb"> </span>i<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&lt;=</span><span style="color:#bbb"> </span>n;<span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">++</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">for</span><span style="color:#bbb"> </span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>j<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>1;<span style="color:#bbb"> </span>j<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&lt;=</span><span style="color:#bbb"> </span>m;<span style="color:#bbb"> </span>j<span style="color:#000;font-weight:bold">++</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>G<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">][</span>j<span style="color:#000;font-weight:bold">]</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>in.<span style="color:#008080">nextInt</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>startX<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>in.<span style="color:#008080">nextInt</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>startY<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>in.<span style="color:#008080">nextInt</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>endX<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>in.<span style="color:#008080">nextInt</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>endY<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>in.<span style="color:#008080">nextInt</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>Start<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>node(startX,startY);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>End<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>node(endX,endY);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>BFS();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(ans<span style="color:#000;font-weight:bold">-</span>1);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><h3 id="迷宫">迷宫</h3>
<p>下图给出了一个迷宫的平面图，其中标记为 $1$ 的为障碍，标记为 $0$ 的为可以通行的地方。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>010000
</span></span><span style="display:flex;"><span>000100
</span></span><span style="display:flex;"><span>001001
</span></span><span style="display:flex;"><span>110000
</span></span></code></pre></div><p>迷宫的入口为左上角，出口为右下角，在迷宫中，只能从一个位置走到这个它的上、下、左、右四个方向之一。</p>
<p>对于上面的迷宫，从入口开始，可以按 <code>DRRURRDDDR</code> 的顺序通过迷宫， 一共 $10$ 步。其中 $D、U、L、R$ 分别表示向下、向上、向左、向右走。 对于下面这个更复杂的迷宫（$30$ 行 $50$ 列），请找出一种通过迷宫的方式，其使用的步数最少，在步数最少的前提下，请找出字典序最小的一个作为答案。</p>
<p>请注意在字典序中 $D&lt;L&lt;R&lt;U$。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>01010101001011001001010110010110100100001000101010
</span></span><span style="display:flex;"><span>00001000100000101010010000100000001001100110100101
</span></span><span style="display:flex;"><span>01111011010010001000001101001011100011000000010000
</span></span><span style="display:flex;"><span>01000000001010100011010000101000001010101011001011
</span></span><span style="display:flex;"><span>00011111000000101000010010100010100000101100000000
</span></span><span style="display:flex;"><span>11001000110101000010101100011010011010101011110111
</span></span><span style="display:flex;"><span>00011011010101001001001010000001000101001110000000
</span></span><span style="display:flex;"><span>10100000101000100110101010111110011000010000111010
</span></span><span style="display:flex;"><span>00111000001010100001100010000001000101001100001001
</span></span><span style="display:flex;"><span>11000110100001110010001001010101010101010001101000
</span></span><span style="display:flex;"><span>00010000100100000101001010101110100010101010000101
</span></span><span style="display:flex;"><span>11100100101001001000010000010101010100100100010100
</span></span><span style="display:flex;"><span>00000010000000101011001111010001100000101010100011
</span></span><span style="display:flex;"><span>10101010011100001000011000010110011110110100001000
</span></span><span style="display:flex;"><span>10101010100001101010100101000010100000111011101001
</span></span><span style="display:flex;"><span>10000000101100010000101100101101001011100000000100
</span></span><span style="display:flex;"><span>10101001000000010100100001000100000100011110101001
</span></span><span style="display:flex;"><span>00101001010101101001010100011010101101110000110101
</span></span><span style="display:flex;"><span>11001010000100001100000010100101000001000111000010
</span></span><span style="display:flex;"><span>00001000110000110101101000000100101001001000011101
</span></span><span style="display:flex;"><span>10100101000101000000001110110010110101101010100001
</span></span><span style="display:flex;"><span>00101000010000110101010000100010001001000100010101
</span></span><span style="display:flex;"><span>10100001000110010001000010101001010101011111010010
</span></span><span style="display:flex;"><span>00000100101000000110010100101001000001000000000010
</span></span><span style="display:flex;"><span>11010000001001110111001001000011101001011011101000
</span></span><span style="display:flex;"><span>00000110100010001000100000001000011101000000110011
</span></span><span style="display:flex;"><span>10101000101000100010001111100010101001010000001000
</span></span><span style="display:flex;"><span>10000010100101001010110000000100101010001011101000
</span></span><span style="display:flex;"><span>00111100001000010000000110111000000001000000001011
</span></span><span style="display:flex;"><span>10000001100111010111010001000110111010101101111000
</span></span></code></pre></div><p><strong>解题思路:</strong></p>
<p>本题是一道简单的搜索题，需要注意的是要按照题目给定的字典序进行搜索，最后输出路径。</p>
<p>我们使用 $BFS$ 搜索记录路径，用 $DFS$ 打印路径。</p>
<p>C++ 语言描述：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#include</span><span style="color:#999;font-weight:bold;font-style:italic">&lt;bits/stdc++.h&gt;</span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic"></span>using namespace std;
</span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#define maxn 2000
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic"></span>
</span></span><span style="display:flex;"><span>string maze[maxn]<span style="color:#000;font-weight:bold">=</span> {
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;01010101001011001001010110010110100100001000101010&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;00001000100000101010010000100000001001100110100101&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;01111011010010001000001101001011100011000000010000&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;01000000001010100011010000101000001010101011001011&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;00011111000000101000010010100010100000101100000000&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;11001000110101000010101100011010011010101011110111&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;00011011010101001001001010000001000101001110000000&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;10100000101000100110101010111110011000010000111010&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;00111000001010100001100010000001000101001100001001&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;11000110100001110010001001010101010101010001101000&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;00010000100100000101001010101110100010101010000101&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;11100100101001001000010000010101010100100100010100&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;00000010000000101011001111010001100000101010100011&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;10101010011100001000011000010110011110110100001000&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;10101010100001101010100101000010100000111011101001&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;10000000101100010000101100101101001011100000000100&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;10101001000000010100100001000100000100011110101001&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;00101001010101101001010100011010101101110000110101&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;11001010000100001100000010100101000001000111000010&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;00001000110000110101101000000100101001001000011101&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;10100101000101000000001110110010110101101010100001&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;00101000010000110101010000100010001001000100010101&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;10100001000110010001000010101001010101011111010010&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;00000100101000000110010100101001000001000000000010&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;11010000001001110111001001000011101001011011101000&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;00000110100010001000100000001000011101000000110011&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;10101000101000100010001111100010101001010000001000&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;10000010100101001010110000000100101010001011101000&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;00111100001000010000000110111000000001000000001011&#34;</span>,
</span></span><span style="display:flex;"><span>                  <span style="color:#d14">&#34;10000001100111010111010001000110111010101101111000&#34;</span>};
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">bool</span> vis[maxn][maxn];<span style="color:#998;font-style:italic">//标记
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#458;font-weight:bold">int</span> dir[<span style="color:#099">4</span>][<span style="color:#099">2</span>]<span style="color:#000;font-weight:bold">=</span>{{<span style="color:#099">1</span>,<span style="color:#099">0</span>},{<span style="color:#099">0</span>,<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>},{<span style="color:#099">0</span>,<span style="color:#099">1</span>},{<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>,<span style="color:#099">0</span>}};<span style="color:#998;font-style:italic">//D L R U
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">bool</span> <span style="color:#900;font-weight:bold">in</span>(<span style="color:#458;font-weight:bold">int</span> x,<span style="color:#458;font-weight:bold">int</span> y)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> x<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">30</span><span style="color:#000;font-weight:bold">&amp;&amp;</span>x<span style="color:#000;font-weight:bold">&gt;=</span><span style="color:#099">0</span><span style="color:#000;font-weight:bold">&amp;&amp;</span>y<span style="color:#000;font-weight:bold">&gt;=</span><span style="color:#099">0</span><span style="color:#000;font-weight:bold">&amp;&amp;</span>y<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">50</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">struct</span> node
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">int</span> x,y,d;
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">char</span> pos;<span style="color:#998;font-style:italic">//存储D L R U
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>node father[maxn][maxn];<span style="color:#998;font-style:italic">//当前节点的父节点
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>node now,nex;<span style="color:#998;font-style:italic">//指向当前和下一个位置
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">dfs</span>(<span style="color:#458;font-weight:bold">int</span> x,<span style="color:#458;font-weight:bold">int</span> y)<span style="color:#998;font-style:italic">//递归打印
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span>(x<span style="color:#000;font-weight:bold">==</span><span style="color:#099">0</span><span style="color:#000;font-weight:bold">&amp;&amp;</span>y<span style="color:#000;font-weight:bold">==</span><span style="color:#099">0</span>)<span style="color:#998;font-style:italic">//找到起点开始正向打印路径
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        <span style="color:#000;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">else</span>
</span></span><span style="display:flex;"><span>        <span style="color:#900;font-weight:bold">dfs</span>(father[x][y].x,father[x][y].y);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    cout<span style="color:#000;font-weight:bold">&lt;&lt;</span>father[x][y].pos;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">bfs</span>(<span style="color:#458;font-weight:bold">int</span> x,<span style="color:#458;font-weight:bold">int</span> y)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    queue<span style="color:#000;font-weight:bold">&lt;</span>node<span style="color:#000;font-weight:bold">&gt;</span> q;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    now.x<span style="color:#000;font-weight:bold">=</span>x;
</span></span><span style="display:flex;"><span>    now.y<span style="color:#000;font-weight:bold">=</span>y;
</span></span><span style="display:flex;"><span>    now.d<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>    q.<span style="color:#900;font-weight:bold">push</span>(now);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    vis[x][y]<span style="color:#000;font-weight:bold">=</span><span style="color:#0086b3">true</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">while</span>(<span style="color:#000;font-weight:bold">!</span>q.<span style="color:#900;font-weight:bold">empty</span>())
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        now<span style="color:#000;font-weight:bold">=</span>q.<span style="color:#900;font-weight:bold">front</span>();
</span></span><span style="display:flex;"><span>        q.<span style="color:#900;font-weight:bold">pop</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span> i<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>;i<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#099">4</span>;i<span style="color:#000;font-weight:bold">++</span>)<span style="color:#998;font-style:italic">//走下左右上按字典序的四个方向
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#458;font-weight:bold">int</span> tx<span style="color:#000;font-weight:bold">=</span>now.x<span style="color:#000;font-weight:bold">+</span>dir[i][<span style="color:#099">0</span>];
</span></span><span style="display:flex;"><span>            <span style="color:#458;font-weight:bold">int</span> ty<span style="color:#000;font-weight:bold">=</span>now.y<span style="color:#000;font-weight:bold">+</span>dir[i][<span style="color:#099">1</span>];
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">if</span>(<span style="color:#900;font-weight:bold">in</span>(tx,ty)<span style="color:#000;font-weight:bold">&amp;&amp;!</span>vis[tx][ty]<span style="color:#000;font-weight:bold">&amp;&amp;</span>maze[tx][ty]<span style="color:#000;font-weight:bold">!=</span><span style="color:#d14">&#39;1&#39;</span>)<span style="color:#998;font-style:italic">//判断是否超出范围，是否用过，是否为1
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            {
</span></span><span style="display:flex;"><span>                vis[tx][ty]<span style="color:#000;font-weight:bold">=</span><span style="color:#0086b3">true</span>;<span style="color:#998;font-style:italic">//标记为用过
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span>                nex.x<span style="color:#000;font-weight:bold">=</span>tx;
</span></span><span style="display:flex;"><span>                nex.y<span style="color:#000;font-weight:bold">=</span>ty;
</span></span><span style="display:flex;"><span>                nex.d<span style="color:#000;font-weight:bold">=</span>now.d<span style="color:#000;font-weight:bold">+</span><span style="color:#099">1</span>;
</span></span><span style="display:flex;"><span>                q.<span style="color:#900;font-weight:bold">push</span>(nex);<span style="color:#998;font-style:italic">//压入队列
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span>                father[tx][ty].x<span style="color:#000;font-weight:bold">=</span>now.x;<span style="color:#998;font-style:italic">//存储父节点坐标
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>                father[tx][ty].y<span style="color:#000;font-weight:bold">=</span>now.y;
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">if</span>(i<span style="color:#000;font-weight:bold">==</span><span style="color:#099">0</span>)<span style="color:#998;font-style:italic">//存储路径
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>                    father[tx][ty].pos<span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#39;D&#39;</span>;
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">if</span>(i<span style="color:#000;font-weight:bold">==</span><span style="color:#099">1</span>)
</span></span><span style="display:flex;"><span>                    father[tx][ty].pos<span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#39;L&#39;</span>;
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">if</span>(i<span style="color:#000;font-weight:bold">==</span><span style="color:#099">2</span>)
</span></span><span style="display:flex;"><span>                    father[tx][ty].pos<span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#39;R&#39;</span>;
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">if</span>(i<span style="color:#000;font-weight:bold">==</span><span style="color:#099">3</span>)
</span></span><span style="display:flex;"><span>                    father[tx][ty].pos<span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#39;U&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#900;font-weight:bold">bfs</span>(<span style="color:#099">0</span>,<span style="color:#099">0</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#900;font-weight:bold">dfs</span>(<span style="color:#099">29</span>,<span style="color:#099">49</span>);<span style="color:#998;font-style:italic">//打印路径
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Java 语言描述:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#555">java.util.*</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Main</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">private</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span>String<span style="color:#000;font-weight:bold">[]</span><span style="color:#bbb"> </span>nn<span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;01010101001011001001010110010110100100001000101010&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;00001000100000101010010000100000001001100110100101&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;01111011010010001000001101001011100011000000010000&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;01000000001010100011010000101000001010101011001011&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;00011111000000101000010010100010100000101100000000&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;11001000110101000010101100011010011010101011110111&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;00011011010101001001001010000001000101001110000000&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;10100000101000100110101010111110011000010000111010&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;00111000001010100001100010000001000101001100001001&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;11000110100001110010001001010101010101010001101000&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;00010000100100000101001010101110100010101010000101&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;11100100101001001000010000010101010100100100010100&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;00000010000000101011001111010001100000101010100011&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;10101010011100001000011000010110011110110100001000&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;10101010100001101010100101000010100000111011101001&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;10000000101100010000101100101101001011100000000100&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;10101001000000010100100001000100000100011110101001&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;00101001010101101001010100011010101101110000110101&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;11001010000100001100000010100101000001000111000010&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;00001000110000110101101000000100101001001000011101&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;10100101000101000000001110110010110101101010100001&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;00101000010000110101010000100010001001000100010101&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;10100001000110010001000010101001010101011111010010&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;00000100101000000110010100101001000001000000000010&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;11010000001001110111001001000011101001011011101000&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;00000110100010001000100000001000011101000000110011&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;10101000101000100010001111100010101001010000001000&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;10000010100101001010110000000100101010001011101000&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;00111100001000010000000110111000000001000000001011&#34;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                  </span><span style="color:#d14">&#34;10000001100111010111010001000110111010101101111000&#34;</span>};<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">private</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">char</span><span style="color:#000;font-weight:bold">[][]</span><span style="color:#bbb"> </span>tu<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">char</span><span style="color:#000;font-weight:bold">[</span>30<span style="color:#000;font-weight:bold">][</span>50<span style="color:#000;font-weight:bold">]</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">private</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#000;font-weight:bold">[][]</span><span style="color:#bbb"> </span>dis<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#000;font-weight:bold">[</span>30<span style="color:#000;font-weight:bold">][</span>50<span style="color:#000;font-weight:bold">]</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">private</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#000;font-weight:bold">[][]</span><span style="color:#bbb"> </span>step<span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>{{1,0},{0,<span style="color:#000;font-weight:bold">-</span>1},{0,1},{<span style="color:#000;font-weight:bold">-</span>1,0}};<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">private</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">char</span><span style="color:#000;font-weight:bold">[]</span><span style="color:#bbb"> </span>direction<span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>{<span style="color:#d14">&#39;D&#39;</span>,<span style="color:#d14">&#39;L&#39;</span>,<span style="color:#d14">&#39;R&#39;</span>,<span style="color:#d14">&#39;U&#39;</span>};<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//    保存经过的每一个点位置信息，采用(x)*m+y的公式表示(x,y);x,y从0开始，位置也是从来开始。m:大于最长边的随便一个数</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//    起点:0;终点:29*50-49</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">private</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span>Queue<span style="color:#000;font-weight:bold">&lt;</span>Integer<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>location<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>LinkedList<span style="color:#000;font-weight:bold">&lt;</span>Integer<span style="color:#000;font-weight:bold">&gt;</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//    广度优先遍历求每一个位置到终点的距离，并存放在dis中</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//    广度优先遍历寻找所有从终点到起点的路线</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">bfs</span>()<span style="color:#bbb"> </span>{<span style="color:#998;font-style:italic">//x,y当前位置;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>x,y;<span style="color:#998;font-style:italic">//当前位置坐标</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic">//不为空，继续循环</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">while</span>(<span style="color:#000;font-weight:bold">!</span>location.<span style="color:#008080">isEmpty</span>())<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>l<span style="color:#000;font-weight:bold">=</span>location.<span style="color:#008080">poll</span>();<span style="color:#998;font-style:italic">//获取当前位置的坐标</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>x<span style="color:#000;font-weight:bold">=</span>l<span style="color:#000;font-weight:bold">/</span>50;<span style="color:#998;font-style:italic">//获取当前位置x</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>y<span style="color:#000;font-weight:bold">=</span>l<span style="color:#000;font-weight:bold">%</span>50;<span style="color:#998;font-style:italic">//获取当前位置y</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">=</span>0;i<span style="color:#000;font-weight:bold">&lt;</span>4;i<span style="color:#000;font-weight:bold">++</span>)<span style="color:#bbb"> </span>{<span style="color:#998;font-style:italic">//探索四个方向</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>xx<span style="color:#000;font-weight:bold">=</span>x<span style="color:#000;font-weight:bold">+</span>step<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">][</span>0<span style="color:#000;font-weight:bold">]</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>yy<span style="color:#000;font-weight:bold">=</span>y<span style="color:#000;font-weight:bold">+</span>step<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">][</span>1<span style="color:#000;font-weight:bold">]</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">if</span>(xx<span style="color:#000;font-weight:bold">&gt;=</span>0<span style="color:#000;font-weight:bold">&amp;&amp;</span>xx<span style="color:#000;font-weight:bold">&lt;</span>30<span style="color:#000;font-weight:bold">&amp;&amp;</span>yy<span style="color:#000;font-weight:bold">&gt;=</span>0<span style="color:#000;font-weight:bold">&amp;&amp;</span>yy<span style="color:#000;font-weight:bold">&lt;</span>50<span style="color:#000;font-weight:bold">&amp;&amp;</span>tu<span style="color:#000;font-weight:bold">[</span>xx<span style="color:#000;font-weight:bold">][</span>yy<span style="color:#000;font-weight:bold">]==</span><span style="color:#d14">&#39;0&#39;</span><span style="color:#000;font-weight:bold">&amp;&amp;</span>dis<span style="color:#000;font-weight:bold">[</span>xx<span style="color:#000;font-weight:bold">][</span>yy<span style="color:#000;font-weight:bold">]==</span>0)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>dis<span style="color:#000;font-weight:bold">[</span>xx<span style="color:#000;font-weight:bold">][</span>yy<span style="color:#000;font-weight:bold">]=</span>dis<span style="color:#000;font-weight:bold">[</span>x<span style="color:#000;font-weight:bold">][</span>y<span style="color:#000;font-weight:bold">]+</span>1;<span style="color:#998;font-style:italic">//当前位置的距离+1等于本次探索位置的距离</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>location.<span style="color:#008080">add</span>(xx<span style="color:#000;font-weight:bold">*</span>50<span style="color:#000;font-weight:bold">+</span>yy);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span><span style="color:#000;font-weight:bold">if</span>(xx<span style="color:#000;font-weight:bold">==</span>0<span style="color:#000;font-weight:bold">&amp;&amp;</span>yy<span style="color:#000;font-weight:bold">==</span>0)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                        </span><span style="color:#000;font-weight:bold">break</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//    深度优先遍历，从起点到终点</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span>String<span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">dfs</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>dis<span style="color:#000;font-weight:bold">[</span>29<span style="color:#000;font-weight:bold">][</span>49<span style="color:#000;font-weight:bold">]=</span>0;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//        起点</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>x<span style="color:#000;font-weight:bold">=</span>0;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>y<span style="color:#000;font-weight:bold">=</span>0;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>String<span style="color:#bbb"> </span>route<span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;&#34;</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">while</span>(x<span style="color:#000;font-weight:bold">!=</span>29<span style="color:#000;font-weight:bold">||</span>y<span style="color:#000;font-weight:bold">!=</span>49)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">=</span>0;i<span style="color:#000;font-weight:bold">&lt;</span>4;i<span style="color:#000;font-weight:bold">++</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>xx<span style="color:#000;font-weight:bold">=</span>x<span style="color:#000;font-weight:bold">+</span>step<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">][</span>0<span style="color:#000;font-weight:bold">]</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>yy<span style="color:#000;font-weight:bold">=</span>y<span style="color:#000;font-weight:bold">+</span>step<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">][</span>1<span style="color:#000;font-weight:bold">]</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">if</span>(xx<span style="color:#000;font-weight:bold">&gt;=</span>0<span style="color:#000;font-weight:bold">&amp;&amp;</span>xx<span style="color:#000;font-weight:bold">&lt;</span>30<span style="color:#000;font-weight:bold">&amp;&amp;</span>yy<span style="color:#000;font-weight:bold">&gt;=</span>0<span style="color:#000;font-weight:bold">&amp;&amp;</span>yy<span style="color:#000;font-weight:bold">&lt;</span>50<span style="color:#000;font-weight:bold">&amp;&amp;</span>tu<span style="color:#000;font-weight:bold">[</span>xx<span style="color:#000;font-weight:bold">][</span>yy<span style="color:#000;font-weight:bold">]==</span><span style="color:#d14">&#39;0&#39;</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span><span style="color:#000;font-weight:bold">if</span>(dis<span style="color:#000;font-weight:bold">[</span>x<span style="color:#000;font-weight:bold">][</span>y<span style="color:#000;font-weight:bold">]==</span>dis<span style="color:#000;font-weight:bold">[</span>xx<span style="color:#000;font-weight:bold">][</span>yy<span style="color:#000;font-weight:bold">]+</span>1)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                        </span>x<span style="color:#000;font-weight:bold">=</span>xx;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                        </span>y<span style="color:#000;font-weight:bold">=</span>yy;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                        </span>route<span style="color:#000;font-weight:bold">+=</span>direction<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                        </span><span style="color:#000;font-weight:bold">break</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span>route;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">main</span>(String<span style="color:#000;font-weight:bold">[]</span><span style="color:#bbb"> </span>args)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#458;font-weight:bold">long</span><span style="color:#bbb"> </span>num<span style="color:#000;font-weight:bold">=</span>0;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">for</span>(<span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>i<span style="color:#000;font-weight:bold">=</span>0;i<span style="color:#000;font-weight:bold">&lt;</span>30;i<span style="color:#000;font-weight:bold">++</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>tu<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]=</span>nn<span style="color:#000;font-weight:bold">[</span>i<span style="color:#000;font-weight:bold">]</span>.<span style="color:#008080">toCharArray</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>location.<span style="color:#008080">add</span>(29<span style="color:#000;font-weight:bold">*</span>50<span style="color:#000;font-weight:bold">+</span>49);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>bfs();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>String<span style="color:#bbb"> </span>route<span style="color:#000;font-weight:bold">=</span>dfs();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(route);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><p>Python 语言描述:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">from</span> <span style="color:#555">collections</span> <span style="color:#000;font-weight:bold">import</span> deque
</span></span><span style="display:flex;"><span>n,m<span style="color:#000;font-weight:bold">=</span><span style="color:#099">30</span>,<span style="color:#099">50</span>
</span></span><span style="display:flex;"><span>M<span style="color:#000;font-weight:bold">=</span>[[<span style="color:#0086b3">int</span>(i) <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">input</span>()]<span style="color:#000;font-weight:bold">for</span> j <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(n)]
</span></span><span style="display:flex;"><span>vis<span style="color:#000;font-weight:bold">=</span>[[<span style="color:#099">0</span>]<span style="color:#000;font-weight:bold">*</span>m <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(n)]
</span></span><span style="display:flex;"><span>go<span style="color:#000;font-weight:bold">=</span>[[<span style="color:#d14">&#39;&#39;</span>]<span style="color:#000;font-weight:bold">*</span>m <span style="color:#000;font-weight:bold">for</span> i <span style="color:#000;font-weight:bold">in</span> <span style="color:#0086b3">range</span>(n)]
</span></span><span style="display:flex;"><span>q<span style="color:#000;font-weight:bold">=</span>deque([(<span style="color:#099">0</span>,<span style="color:#099">0</span>)])
</span></span><span style="display:flex;"><span>vis[<span style="color:#099">0</span>][<span style="color:#099">0</span>]<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">while</span> q:
</span></span><span style="display:flex;"><span>    x,y<span style="color:#000;font-weight:bold">=</span>q<span style="color:#000;font-weight:bold">.</span>popleft()
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span> x<span style="color:#000;font-weight:bold">==</span>n<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span> <span style="color:#000;font-weight:bold">and</span> y<span style="color:#000;font-weight:bold">==</span>m<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#0086b3">print</span>(go[<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>][<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>])
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">break</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">for</span> i,j,k <span style="color:#000;font-weight:bold">in</span> [[<span style="color:#099">1</span>,<span style="color:#099">0</span>,<span style="color:#d14">&#39;D&#39;</span>],[<span style="color:#099">0</span>,<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>,<span style="color:#d14">&#39;L&#39;</span>],[<span style="color:#099">0</span>,<span style="color:#099">1</span>,<span style="color:#d14">&#39;R&#39;</span>],[<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>,<span style="color:#099">0</span>,<span style="color:#d14">&#39;U&#39;</span>]]:
</span></span><span style="display:flex;"><span>        a,b<span style="color:#000;font-weight:bold">=</span>x<span style="color:#000;font-weight:bold">+</span>i,y<span style="color:#000;font-weight:bold">+</span>j
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span> <span style="color:#099">0</span><span style="color:#000;font-weight:bold">&lt;=</span>a<span style="color:#000;font-weight:bold">&lt;</span>n <span style="color:#000;font-weight:bold">and</span> <span style="color:#099">0</span><span style="color:#000;font-weight:bold">&lt;=</span>b<span style="color:#000;font-weight:bold">&lt;</span>m <span style="color:#000;font-weight:bold">and</span> M[a][b]<span style="color:#000;font-weight:bold">==</span><span style="color:#099">0</span> <span style="color:#000;font-weight:bold">and</span> vis[a][b]<span style="color:#000;font-weight:bold">==</span><span style="color:#099">0</span>:
</span></span><span style="display:flex;"><span>            vis[a][b]<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
</span></span><span style="display:flex;"><span>            q<span style="color:#000;font-weight:bold">.</span>append((a,b))
</span></span><span style="display:flex;"><span>            go[a][b]<span style="color:#000;font-weight:bold">=</span>go[x][y]<span style="color:#000;font-weight:bold">+</span>k
</span></span></code></pre></div><h2 id="实验总结-1">实验总结</h2>
<p>BFS 是广度优先搜索，是将某节点所有的“枝蔓”加入搜索队列，然后去除队列的首部的节点，重复进行该动作，这样就能由开始状态“一圈一圈的查找”。 BFS 拥有一个性质，那么就是先找到的节点，所经过的步骤一定最短。它一般用于寻找在近的状态，也是一个非常基础的算法，希望大家认真学习。</p>

    </div>

    

    

    <div class="container-prevnext">
    <div><a href="http://localhost:1313/%E6%9E%9A%E4%B8%BE%E6%B3%95%E4%B8%8E%E5%B0%BA%E5%8F%96%E6%B3%95/">← 枚举法与尺取法</a></div>
    <div><a href="http://localhost:1313/%E9%80%92%E6%8E%A8%E6%B3%95%E4%B8%8E%E9%80%92%E5%BD%92%E6%B3%95/">递推法与递归法  →</a></div>
</div>
    
    

    
</div>

        </div>
        <div id="footer"><div class="container-footer">
    
    <a href="//beian.miit.gov.cn" target="_blank">
        
        豫ICP备2022002918号-1
        
    </a>
    <a id="s" href="/secrets">&nbsp;</a>
    
</div></div>
    </body>
</html>
